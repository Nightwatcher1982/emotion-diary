import{g as e,o as a,c as l,w as t,b as s,a as o,d as c,t as n,l as u,m as i,F as r,z as d,i as f,k as h,e as v,r as _,h as p,j as m,u as k,f as y,n as g}from"./index-6afd3b48.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const C=b(e({__name:"SimpleChart",props:{chartType:null,data:null,title:null,width:{default:"100%"},height:{default:"300rpx"}},emits:["chartClick"],setup(e,{emit:_}){const p=e,m=["6-8","8-10","10-12","12-14","14-16","16-18","18-20","20-22","22-24"],k=["周一","周二","周三","周四","周五","周六","周日"],y=()=>{if(!p.data.length)return"";const e=300/(p.data.length-1);return p.data.map((a,l)=>`${l*e},${200-200*(a.value||a.mood)/10}`).join(" ")},g=()=>{const e=y();return e?`0,200 ${e} 300,200`:""},b=()=>{if(!p.data.length)return[];const e=300/(p.data.length-1);return p.data.map((a,l)=>({x:l*e,y:200-200*(a.value||a.mood)/10}))},C=e=>{if(!p.data.length)return"0%";const a=p.data.map(e=>e.value||e.count||0).filter(e=>e>0);if(0===a.length)return"0%";const l=Math.max(...a),t=e.value||e.count||0;if(0===l)return"0%";const s=t/l*80;return`${Math.max(s,2)}%`},x=()=>{if(!p.data.length)return[];const e=p.data.reduce((e,a)=>e+(a.percentage||a.value||0),0);if(0===e)return[];let a=-Math.PI/2;return p.data.map((l,t)=>{const s=(l.percentage||l.value||0)/e,o=2*s*Math.PI;if(0===o)return{path:"",color:l.color};const c=100,n=100,u=70,i=c+u*Math.cos(a),r=n+u*Math.sin(a),d=c+u*Math.cos(a+o),f=n+u*Math.sin(a+o),h=o>Math.PI?1:0;let v;return v=s>=.999?"M 100 30 A 70 70 0 1 1 99 30 Z":["M 100 100",`L ${i} ${r}`,`A 70 70 0 ${h} 1 ${d} ${f}`,"Z"].join(" "),a+=o,{path:v,color:l.color||"#4A90E2",percentage:Math.round(100*s)}}).filter(e=>""!==e.path)},w=()=>{const e=[];for(let a=0;a<7;a++){const l=[];for(let e=0;e<9;e++){const t=p.data.find(l=>l.day===a&&l.hour===e);l.push({value:t?t.intensity:Math.random()})}e.push(l)}return e};return(E,$)=>{const F=f,A=v;return a(),l(F,{class:"chart-container"},{default:t(()=>[s(" 折线图 "),"line"===e.chartType?(a(),l(F,{key:0,class:"line-chart"},{default:t(()=>[o(F,{class:"chart-title"},{default:t(()=>[c(n(e.title||"情绪趋势"),1)]),_:1}),o(F,{class:"line-chart-area"},{default:t(()=>[o(F,{class:"y-axis"},{default:t(()=>[(a(),u(r,null,i(11,e=>o(A,{key:e,class:"y-label"},{default:t(()=>[c(n(10-(e-1)),1)]),_:2},1024)),64))]),_:1}),o(F,{class:"chart-content"},{default:t(()=>[(a(),u("svg",{class:"line-svg",viewBox:"0 0 300 200"},[d("defs",null,[d("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[d("stop",{offset:"0%",style:{"stop-color":"#4A90E2","stop-opacity":"0.3"}}),d("stop",{offset:"100%",style:{"stop-color":"#4A90E2","stop-opacity":"0.05"}})])]),d("polyline",{points:y(),fill:"none",stroke:"#4A90E2","stroke-width":"2"},null,8,["points"]),d("polygon",{points:g(),fill:"url(#gradient)"},null,8,["points"]),(a(!0),u(r,null,i(b(),(e,l)=>(a(),u("circle",{key:l,cx:e.x,cy:e.y,r:"3",fill:"#4A90E2",onClick:e=>(e=>{_("chartClick",{type:"point",index:e,data:p.data[e]})})(l)},null,8,["cx","cy","onClick"]))),128))])),o(F,{class:"x-axis"},{default:t(()=>[(a(!0),u(r,null,i(e.data,(e,s)=>(a(),l(A,{key:s,class:"x-label"},{default:t(()=>[c(n(e.name||e.label),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})):"bar"===e.chartType?(a(),u(r,{key:1},[s(" 柱状图 "),o(F,{class:"bar-chart"},{default:t(()=>[o(F,{class:"chart-title"},{default:t(()=>[c(n(e.title||"数据统计"),1)]),_:1}),o(F,{class:"bar-chart-area"},{default:t(()=>[o(F,{class:"bars-container"},{default:t(()=>[(a(!0),u(r,null,i(e.data,(e,s)=>(a(),l(F,{key:s,class:"bar-item",onClick:e=>(e=>{_("chartClick",{type:"bar",index:e,data:p.data[e]})})(s)},{default:t(()=>[o(F,{class:"bar-value-top"},{default:t(()=>[c(n(e.value||e.count),1)]),_:2},1024),o(F,{class:"bar",style:h({height:C(e),backgroundColor:e.color||"#4A90E2"})},null,8,["style"]),o(A,{class:"bar-label"},{default:t(()=>[c(n(e.name||e.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],2112)):"pie"===e.chartType?(a(),u(r,{key:2},[s(" 饼图 "),o(F,{class:"pie-chart"},{default:t(()=>[o(F,{class:"chart-title"},{default:t(()=>[c(n(e.title||"分布统计"),1)]),_:1}),o(F,{class:"pie-chart-area"},{default:t(()=>[o(F,{class:"pie-container"},{default:t(()=>[(a(),u("svg",{class:"pie-svg",viewBox:"0 0 200 200"},[(a(!0),u(r,null,i(x(),(e,l)=>(a(),u("g",{key:l},[d("path",{d:e.path,fill:e.color,onClick:e=>(e=>{_("chartClick",{type:"pie",index:e,data:p.data[e]})})(l)},null,8,["d","fill","onClick"])]))),128))]))]),_:1}),o(F,{class:"pie-legend"},{default:t(()=>[(a(!0),u(r,null,i(e.data,(e,s)=>(a(),l(F,{key:s,class:"legend-item"},{default:t(()=>[o(F,{class:"legend-color",style:h({backgroundColor:e.color})},null,8,["style"]),o(A,{class:"legend-text"},{default:t(()=>[c(n(e.name)+" ("+n(e.percentage||e.value)+"%)",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})],2112)):"heatmap"===e.chartType?(a(),u(r,{key:3},[s(" 热力图 "),o(F,{class:"heatmap-chart"},{default:t(()=>[o(F,{class:"chart-title"},{default:t(()=>[c(n(e.title||"活跃度热力图"),1)]),_:1}),o(F,{class:"heatmap-area"},{default:t(()=>[o(F,{class:"heatmap-grid"},{default:t(()=>[(a(!0),u(r,null,i(w(),(e,s)=>(a(),l(F,{key:s,class:"heatmap-row"},{default:t(()=>[(a(!0),u(r,null,i(e,(e,u)=>{return a(),l(F,{key:u,class:"heatmap-cell",style:h({backgroundColor:(i=e.value,`rgba(74, 144, 226, ${Math.max(.1,Math.min(1,i))})`)}),onClick:e=>((e,a)=>{_("chartClick",{type:"heatmap",row:e,col:a,day:k[e],hour:m[a]})})(s,u)},{default:t(()=>[o(A,{class:"cell-value"},{default:t(()=>[c(n(e.value.toFixed(1)),1)]),_:2},1024)]),_:2},1032,["style","onClick"]);var i}),128))]),_:2},1024))),128))]),_:1}),o(F,{class:"heatmap-labels"},{default:t(()=>[o(F,{class:"x-labels"},{default:t(()=>[(a(),u(r,null,i(m,e=>o(A,{key:e,class:"hour-label"},{default:t(()=>[c(n(e),1)]),_:2},1024)),64))]),_:1}),o(F,{class:"y-labels"},{default:t(()=>[(a(),u(r,null,i(k,e=>o(A,{key:e,class:"day-label"},{default:t(()=>[c(n(e),1)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1})],2112)):s("v-if",!0)]),_:1})}}}),[["__scopeId","data-v-937f4333"]]),x=b(e({__name:"index",setup(e){const d=_("week"),b=_("line"),x=_("week"),w=_([{value:"week",label:"本周"},{value:"month",label:"本月"},{value:"quarter",label:"本季度"},{value:"year",label:"本年"}]),E=_([{type:"week",label:"周模式"},{type:"hour",label:"时段模式"}]),$=_({totalRecords:28,averageMood:6.8,streakDays:7,improvementRate:15}),F=p(()=>[{icon:"📝",value:$.value.totalRecords,label:"总记录数"},{icon:"😊",value:$.value.averageMood.toFixed(1),label:"平均情绪"},{icon:"🔥",value:$.value.streakDays,label:"连续天数"},{icon:"📈",value:`${$.value.improvementRate}%`,label:"改善率"}]),A=_([{name:"快乐",value:33.3,color:"#FFD700"},{name:"焦虑",value:18.2,color:"#FF8C00"},{name:"平静",value:15.9,color:"#87CEEB"},{name:"悲伤",value:13.6,color:"#6495ED"},{name:"愤怒",value:11.4,color:"#DC143C"},{name:"恐惧",value:7.6,color:"#9370DB"}]),M=_([{name:"个人",value:18,color:"#FFB6C1"},{name:"工作",value:8,color:"#4A90E2"},{name:"社交",value:6,color:"#90EE90"},{name:"学习",value:4,color:"#20B2AA"},{name:"健康",value:3,color:"#DDA0DD"},{name:"其他",value:2,color:"#F0E68C"}]),T=_([{name:"周一",value:6.2,color:"#4A90E2"},{name:"周二",value:7.1,color:"#4A90E2"},{name:"周三",value:5.8,color:"#4A90E2"},{name:"周四",value:6.9,color:"#4A90E2"},{name:"周五",value:7.5,color:"#4A90E2"},{name:"周六",value:8.2,color:"#4A90E2"},{name:"周日",value:7.8,color:"#4A90E2"}]),D=_([{hour:"早晨",value:7.2,color:"#FFD700"},{hour:"上午",value:6.8,color:"#FFA500"},{hour:"中午",value:6.5,color:"#FF8C00"},{hour:"下午",value:6.2,color:"#FF6347"},{hour:"傍晚",value:7,color:"#9370DB"},{hour:"晚上",value:7.5,color:"#4169E1"}]),z=_([{text:"开心",size:48,color:"#FFD700"},{text:"焦虑",size:36,color:"#FF8C00"},{text:"平静",size:32,color:"#87CEEB"},{text:"压力",size:28,color:"#DC143C"},{text:"满足",size:24,color:"#90EE90"},{text:"疲惫",size:20,color:"#9370DB"}]),B=_([{id:1,name:"初心者",icon:"🌱",description:"完成第一次情绪记录",unlocked:!0,progress:1,target:1},{id:2,name:"坚持者",icon:"🔥",description:"连续记录7天",unlocked:!0,progress:7,target:7},{id:3,name:"探索者",icon:"🔍",description:"尝试所有情绪类型",unlocked:!1,progress:4,target:6},{id:4,name:"分析师",icon:"📊",description:"使用AI分析10次",unlocked:!1,progress:6,target:10}]),I=p(()=>B.value.filter(e=>e.unlocked).length),R=p(()=>B.value.length),j=()=>{b.value="line"===b.value?"bar":"line"},P=()=>{const e=$.value.improvementRate;return e>10?"情绪呈上升趋势 📈":e>0?"情绪保持稳定 ➡️":"需要关注情绪变化 📉"},S=()=>{const e=A.value[0];return`${e.name} ${e.value}%`},L=e=>{console.log("Chart clicked:",e),uni.showToast({title:`查看${e.name}详情`,icon:"none"})},W=e=>{console.log("Emotion clicked:",e),uni.showToast({title:`${e.name}: ${e.value}%`,icon:"none"})},Z=e=>{console.log("Scene clicked:",e),uni.showToast({title:`${e.name}: ${e.value}次`,icon:"none"})},q=e=>{console.log("Week clicked:",e),uni.showToast({title:`${e.name}: ${e.value}分`,icon:"none"})},G=e=>{console.log("Heatmap clicked:",e),uni.showToast({title:`${e.hour}: ${e.value}分`,icon:"none"})},H=()=>{uni.showToast({title:"正在生成报告...",icon:"loading"}),setTimeout(()=>{uni.showToast({title:"报告已生成",icon:"success"})},2e3)},J=()=>{uni.showToast({title:"正在刷新数据...",icon:"loading"}),N()},K=()=>{uni.showToast({title:"分享功能开发中",icon:"none"})},N=async()=>{try{console.log("Loading stats data for:",d.value)}catch(e){console.error("Failed to load stats:",e),uni.showToast({title:"数据加载失败",icon:"none"})}};return m(()=>{N()}),(e,_)=>{const p=v,m=f,O=y;return a(),l(m,{class:"container"},{default:t(()=>[s(" 页面标题区域 "),o(m,{class:"page-header"},{default:t(()=>[o(m,{class:"header-content"},{default:t(()=>[o(p,{class:"page-title"},{default:t(()=>[c("数据统计")]),_:1}),o(p,{class:"page-subtitle"},{default:t(()=>[c("洞察你的情绪变化")]),_:1})]),_:1}),o(m,{class:"stats-badge"},{default:t(()=>[o(p,{class:"badge-text"},{default:t(()=>[c(n($.value.totalRecords),1)]),_:1}),o(p,{class:"badge-label"},{default:t(()=>[c("总记录")]),_:1})]),_:1})]),_:1}),s(" 时间范围选择 "),o(m,{class:"time-selector"},{default:t(()=>[(a(!0),u(r,null,i(w.value,e=>(a(),l(m,{class:g(["time-option",{active:d.value===e.value}]),key:e.value,onClick:a=>{return l=e.value,d.value=l,void N();var l}},{default:t(()=>[o(p,null,{default:t(()=>[c(n(e.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),s(" 统计概览卡片 "),o(m,{class:"stats-overview"},{default:t(()=>[(a(!0),u(r,null,i(k(F),(e,s)=>(a(),l(m,{class:"overview-item",key:s},{default:t(()=>[o(m,{class:"item-icon"},{default:t(()=>[c(n(e.icon),1)]),_:2},1024),o(m,{class:"item-content"},{default:t(()=>[o(p,{class:"overview-number"},{default:t(()=>[c(n(e.value),1)]),_:2},1024),o(p,{class:"overview-label"},{default:t(()=>[c(n(e.label),1)]),_:2},1024)]),_:2},1024),o(m,{class:"item-glow"})]),_:2},1024))),128))]),_:1}),s(" 情绪趋势图 "),o(m,{class:"chart-section"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("情绪趋势")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c(n(P()),1)]),_:1})]),_:1}),o(m,{class:"chart-controls"},{default:t(()=>[o(p,{class:"chart-type",onClick:j},{default:t(()=>[c(n("line"===b.value?"📈":"📊"),1)]),_:1})]),_:1})]),_:1}),o(m,{class:"chart-container"},{default:t(()=>[o(C,{"chart-type":b.value,data:T.value,title:"本周情绪变化",onChartClick:L},null,8,["chart-type","data"])]),_:1})]),_:1}),s(" 情绪分布 "),o(m,{class:"emotion-distribution"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("情绪分布")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c("了解你的情绪构成")]),_:1})]),_:1}),o(m,{class:"distribution-status"},{default:t(()=>[o(p,{class:"status-text"},{default:t(()=>[c(n(S()),1)]),_:1})]),_:1})]),_:1}),o(m,{class:"chart-container"},{default:t(()=>[o(C,{"chart-type":"pie",data:A.value,title:"情绪类型分布",onChartClick:W},null,8,["data"])]),_:1})]),_:1}),s(" 场景分析 "),o(m,{class:"scene-analysis"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("场景分析")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c("不同场景的情绪记录")]),_:1})]),_:1})]),_:1}),o(m,{class:"chart-container"},{default:t(()=>[o(C,{"chart-type":"bar",data:M.value,title:"不同场景记录次数",onChartClick:Z},null,8,["data"])]),_:1})]),_:1}),s(" 时间模式 "),o(m,{class:"time-pattern"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("时间模式")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c("发现你的情绪规律")]),_:1})]),_:1})]),_:1}),o(m,{class:"pattern-tabs"},{default:t(()=>[(a(!0),u(r,null,i(E.value,e=>(a(),l(m,{class:g(["pattern-tab",{active:x.value===e.type}]),key:e.type,onClick:a=>{return l=e.type,void(x.value=l);var l}},{default:t(()=>[o(p,null,{default:t(()=>[c(n(e.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),o(m,{class:"pattern-content"},{default:t(()=>[s(" 周模式 "),"week"===x.value?(a(),l(m,{key:0,class:"week-pattern"},{default:t(()=>[o(C,{"chart-type":"bar",data:T.value,title:"一周情绪变化",onChartClick:q},null,8,["data"])]),_:1})):s("v-if",!0),s(" 时段模式 "),"hour"===x.value?(a(),l(m,{key:1,class:"hour-pattern"},{default:t(()=>[o(C,{"chart-type":"heatmap",data:D.value,title:"时段活跃度热力图",onChartClick:G},null,8,["data"])]),_:1})):s("v-if",!0)]),_:1})]),_:1}),s(" 情绪词云 "),o(m,{class:"emotion-wordcloud"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("情绪关键词")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c("高频情绪词汇")]),_:1})]),_:1}),o(p,{class:"wordcloud-tip"},{default:t(()=>[c("点击查看详情")]),_:1})]),_:1}),o(m,{class:"wordcloud-container"},{default:t(()=>[(a(!0),u(r,null,i(z.value,e=>(a(),l(m,{class:"word-item",key:e.text,style:h({fontSize:e.size+"rpx",color:e.color}),onClick:a=>(e=>{console.log("Word clicked:",e),uni.showToast({title:`查看"${e.text}"相关记录`,icon:"none"})})(e)},{default:t(()=>[c(n(e.text)+" ",1),o(m,{class:"word-glow",style:h({backgroundColor:e.color})},null,8,["style"])]),_:2},1032,["style","onClick"]))),128))]),_:1})]),_:1}),s(" 成就系统 "),o(m,{class:"achievements"},{default:t(()=>[o(m,{class:"section-header"},{default:t(()=>[o(m,{class:"header-left"},{default:t(()=>[o(p,{class:"section-title"},{default:t(()=>[c("成就徽章")]),_:1}),o(p,{class:"section-subtitle"},{default:t(()=>[c("记录你的成长足迹")]),_:1})]),_:1}),o(m,{class:"achievement-summary"},{default:t(()=>[o(p,{class:"achievement-count"},{default:t(()=>[c(n(k(I))+"/"+n(k(R)),1)]),_:1}),o(p,{class:"achievement-percentage"},{default:t(()=>[c(n(Math.round(k(I)/k(R)*100))+"%",1)]),_:1})]),_:1})]),_:1}),o(m,{class:"achievement-grid"},{default:t(()=>[(a(!0),u(r,null,i(B.value,e=>(a(),l(m,{class:g(["achievement-item",{unlocked:e.unlocked}]),key:e.id,onClick:a=>(e=>{console.log("Achievement clicked:",e);const a=e.unlocked?`已获得: ${e.description}`:`进度: ${e.progress}/${e.target}`;uni.showToast({title:a,icon:"none"})})(e)},{default:t(()=>[o(m,{class:"achievement-icon-container"},{default:t(()=>[o(p,{class:"achievement-icon"},{default:t(()=>[c(n(e.icon),1)]),_:2},1024),e.unlocked?(a(),l(m,{key:0,class:"icon-glow"})):s("v-if",!0)]),_:2},1024),o(p,{class:"achievement-name"},{default:t(()=>[c(n(e.name),1)]),_:2},1024),e.unlocked?s("v-if",!0):(a(),l(m,{key:0,class:"achievement-progress"},{default:t(()=>[o(m,{class:"progress-bar",style:h({width:e.progress/e.target*100+"%"})},null,8,["style"])]),_:2},1024)),e.unlocked?(a(),l(p,{key:1,class:"achievement-desc"},{default:t(()=>[c(n(e.description),1)]),_:2},1024)):s("v-if",!0)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),s(" 导出报告 "),o(m,{class:"export-section"},{default:t(()=>[o(O,{class:"export-button",onClick:H},{default:t(()=>[o(m,{class:"button-content"},{default:t(()=>[o(p,{class:"button-icon"},{default:t(()=>[c("📊")]),_:1}),o(p,{class:"button-text"},{default:t(()=>[c("导出情绪报告")]),_:1})]),_:1}),o(m,{class:"button-glow"})]),_:1})]),_:1}),s(" 浮动操作按钮 "),o(m,{class:"floating-actions"},{default:t(()=>[o(m,{class:"fab-item",onClick:J},{default:t(()=>[o(p,{class:"fab-icon"},{default:t(()=>[c("🔄")]),_:1})]),_:1}),o(m,{class:"fab-item",onClick:K},{default:t(()=>[o(p,{class:"fab-icon"},{default:t(()=>[c("📤")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-facf58f9"]]);export{x as default};
