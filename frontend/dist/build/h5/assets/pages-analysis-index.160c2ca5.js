import{g as e,r as t,h as a,j as s,q as i,o as l,c as n,w as c,b as o,a as d,d as u,n as r,t as m,l as f,F as p,m as _,u as y,e as g,i as v,f as h,y as w,k}from"./index-6afd3b48.js";import{g as b,e as C,d as x}from"./api.ae518a48.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";const T=A(e({__name:"index",setup(e){const A=t(!0),T=t(0),I=t({}),S=t([{type:"immediate",title:"å³æ—¶ç¼“è§£",icon:"âš¡"},{type:"longterm",title:"é•¿æœŸæ”¹å–„",icon:"ðŸŽ¯"},{type:"lifestyle",title:"ç”Ÿæ´»æ–¹å¼",icon:"ðŸŒ±"},{type:"social",title:"ç¤¾äº¤æ”¯æŒ",icon:"ðŸ‘¥"}]),P=a(()=>{if(!I.value.suggestions)return[];const e=S.value[T.value].type;return I.value.suggestions[e]||[]}),M=e=>{if(!e)return"";return new Date(e).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},D=e=>({easy:"å®¹æ˜“",medium:"ä¸­ç­‰",hard:"å›°éš¾"}[e]||"ä¸­ç­‰"),E=e=>e||"ç¨³å®š",$=e=>{uni.showModal({title:"åº”ç”¨å»ºè®®",content:`ç¡®å®šè¦å°†"${e.title}"æ·»åŠ åˆ°ä»Šæ—¥è®¡åˆ’å—ï¼Ÿ`,success:e=>{e.confirm&&uni.showToast({title:"å·²æ·»åŠ åˆ°è®¡åˆ’",icon:"success"})}})},j=()=>{uni.share({provider:"weixin",type:0,title:"æˆ‘çš„æƒ…ç»ªåˆ†æžæŠ¥å‘Š",summary:"é€šè¿‡AIåˆ†æžï¼Œæˆ‘å¯¹è‡ªå·±çš„æƒ…ç»ªæœ‰äº†æ›´æ·±çš„äº†è§£",success:()=>{uni.showToast({title:"åˆ†äº«æˆåŠŸ",icon:"success"})}})},R=()=>{uni.switchTab({url:"/pages/record/index"})},q=async()=>{uni.showModal({title:"é‡æ–°åˆ†æž",content:"å°†åŸºäºŽæœ€æ–°çš„æƒ…ç»ªè®°å½•é‡æ–°è¿›è¡ŒAIåˆ†æžï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ",success:async e=>{e.confirm&&await F()}})},z=async()=>{try{const e={analysis_data:I.value,created_at:(new Date).toISOString(),analysis_type:"comprehensive"};uni.setStorageSync("latest_analysis",e),uni.showToast({title:"åˆ†æžç»“æžœå·²ä¿å­˜",icon:"success"})}catch(e){console.error("ä¿å­˜åˆ†æžç»“æžœå¤±è´¥:",e),uni.showToast({title:"ä¿å­˜å¤±è´¥",icon:"none"})}},B=e=>{console.log("å›¾è¡¨è§¦æ‘¸äº‹ä»¶",e)},F=async e=>{try{if(!b())return uni.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"}),void uni.navigateTo({url:"/pages/login/index"});A.value=!0;let t=[];if(e){t=[await C.getRecordById(e)]}else{const e=await C.getRecentRecords();t=e.results||e}if(!t||0===t.length)return uni.showModal({title:"æš‚æ— æ•°æ®",content:"è¿˜æ²¡æœ‰æƒ…ç»ªè®°å½•ï¼Œè¯·å…ˆè®°å½•ä¸€äº›æƒ…ç»ªæ•°æ®",success:e=>{e.confirm&&uni.switchTab({url:"/pages/record/index"})}}),void(A.value=!1);const a={emotion_records:t.map(e=>e.id),analysis_type:"comprehensive",include_suggestions:!0,include_trend:!0},s=await x.requestAnalysis(a);I.value=L(s,t),A.value=!1}catch(t){console.error("èŽ·å–åˆ†æžæ•°æ®å¤±è´¥:",t),A.value=!1,uni.showToast({title:"AIåˆ†æžæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºç¤ºä¾‹æ•°æ®",icon:"none",duration:3e3}),setTimeout(()=>{I.value={timestamp:Date.now(),primaryEmotion:{name:"ç„¦è™‘",icon:"ðŸ˜Ÿ",confidence:85},emotionSpectrum:[{name:"ç„¦è™‘",percentage:45},{name:"æ‹…å¿ƒ",percentage:30},{name:"ç´§å¼ ",percentage:15},{name:"ä¸å®‰",percentage:10}],insights:[{type:"pattern",icon:"ðŸ”",title:"æƒ…ç»ªæ¨¡å¼è¯†åˆ«",content:"ä½ çš„ç„¦è™‘æƒ…ç»ªä¸»è¦å‡ºçŽ°åœ¨å·¥ä½œåœºæ™¯ä¸­ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹æˆªæ­¢æ—¥æœŸæ—¶ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„é€‚åº”æ€§ç„¦è™‘ï¼Œè¯´æ˜Žä½ å¯¹å·¥ä½œå¾ˆè´Ÿè´£ã€‚"},{type:"trigger",icon:"âš¡",title:"è§¦å‘å› ç´ åˆ†æž",content:'åˆ†æžæ˜¾ç¤ºï¼Œæ—¶é—´åŽ‹åŠ›å’Œå®Œç¾Žä¸»ä¹‰å€¾å‘æ˜¯ä½ ç„¦è™‘çš„ä¸»è¦è§¦å‘å› ç´ ã€‚å»ºè®®å­¦ä¹ æ—¶é—´ç®¡ç†æŠ€å·§å’ŒæŽ¥å—"è¶³å¤Ÿå¥½"çš„æ ‡å‡†ã€‚'},{type:"strength",icon:"ðŸ’ª",title:"æƒ…ç»ªä¼˜åŠ¿",content:"ä½ å…·æœ‰å¾ˆå¥½çš„æƒ…ç»ªè§‰å¯Ÿèƒ½åŠ›ï¼Œèƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å’Œæè¿°è‡ªå·±çš„æ„Ÿå—ã€‚è¿™æ˜¯æƒ…ç»ªç®¡ç†çš„é‡è¦åŸºç¡€ã€‚"}],suggestions:{immediate:[{id:1,title:"4-7-8å‘¼å¸æ³•",description:"å¸æ°”4ç§’ï¼Œå±æ°”7ç§’ï¼Œå‘¼æ°”8ç§’ã€‚é‡å¤3-4æ¬¡å¯å¿«é€Ÿç¼“è§£ç„¦è™‘ã€‚",difficulty:"easy"},{id:2,title:"5-4-3-2-1æŽ¥åœ°æŠ€å·§",description:"è¯´å‡º5ä¸ªçœ‹åˆ°çš„ã€4ä¸ªå¬åˆ°çš„ã€3ä¸ªæ‘¸åˆ°çš„ã€2ä¸ªé—»åˆ°çš„ã€1ä¸ªå°åˆ°çš„ã€‚",difficulty:"easy"}],longterm:[{id:3,title:"è®¤çŸ¥é‡æž„ç»ƒä¹ ",description:"è¯†åˆ«å¹¶æŒ‘æˆ˜æ¶ˆæžæ€ç»´æ¨¡å¼ï¼Œç”¨æ›´å¹³è¡¡çš„æƒ³æ³•æ›¿ä»£ã€‚",difficulty:"medium"},{id:4,title:"æ­£å¿µå†¥æƒ³",description:"æ¯å¤©10-15åˆ†é’Ÿçš„æ­£å¿µç»ƒä¹ ï¼Œæé«˜æƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›ã€‚",difficulty:"medium"}],lifestyle:[{id:5,title:"è§„å¾‹è¿åŠ¨",description:"æ¯å‘¨3-4æ¬¡æœ‰æ°§è¿åŠ¨ï¼Œæ¯æ¬¡30åˆ†é’Ÿï¼Œæœ‰åŠ©äºŽç¼“è§£ç„¦è™‘ã€‚",difficulty:"medium"},{id:6,title:"ç¡çœ ä¼˜åŒ–",description:"å»ºç«‹è§„å¾‹çš„ç¡çœ æ—¶é—´ï¼Œåˆ›é€ è‰¯å¥½çš„ç¡çœ çŽ¯å¢ƒã€‚",difficulty:"hard"}],social:[{id:7,title:"å¯»æ±‚æ”¯æŒ",description:"ä¸Žä¿¡ä»»çš„æœ‹å‹æˆ–å®¶äººåˆ†äº«ä½ çš„æ„Ÿå—ï¼ŒèŽ·å¾—æƒ…æ„Ÿæ”¯æŒã€‚",difficulty:"medium"},{id:8,title:"ä¸“ä¸šå’¨è¯¢",description:"å¦‚æžœç„¦è™‘æŒç»­å½±å“ç”Ÿæ´»ï¼Œè€ƒè™‘å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆçš„å¸®åŠ©ã€‚",difficulty:"hard"}]},trend:{average:6.5,volatility:"ä¸­ç­‰",direction:"ç¨³å®š"},deepAnalysis:{score:78,dimensions:[{name:"æƒ…ç»ªè§‰å¯Ÿ",score:8,description:"èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«è‡ªå·±çš„æƒ…ç»ªçŠ¶æ€"},{name:"åº”å¯¹ç­–ç•¥",score:6,description:"å…·å¤‡ä¸€å®šçš„æƒ…ç»ªè°ƒèŠ‚æŠ€å·§ï¼Œä½†éœ€è¦åŠ å¼º"},{name:"ç¤¾ä¼šæ”¯æŒ",score:7,description:"æ‹¥æœ‰è‰¯å¥½çš„ç¤¾ä¼šæ”¯æŒç½‘ç»œ"},{name:"ç”Ÿæ´»å¹³è¡¡",score:5,description:"å·¥ä½œä¸Žç”Ÿæ´»å¹³è¡¡éœ€è¦æ”¹å–„"}]},actionPlan:[{title:"ç»ƒä¹ æ·±å‘¼å¸",description:"æ¯å¤©æ—©æ™¨ç»ƒä¹ 5åˆ†é’Ÿæ·±å‘¼å¸",completed:!1},{title:"è®°å½•è§¦å‘å› ç´ ",description:"è§‚å¯Ÿå¹¶è®°å½•å¼•èµ·ç„¦è™‘çš„å…·ä½“æƒ…å†µ",completed:!1},{title:"å°è¯•æ­£å¿µç»ƒä¹ ",description:"ä¸‹è½½å†¥æƒ³Appï¼Œå°è¯•10åˆ†é’Ÿæ­£å¿µç»ƒä¹ ",completed:!1},{title:"åˆ¶å®šæ—¶é—´è®¡åˆ’",description:"ä¸ºé‡è¦ä»»åŠ¡åˆ¶å®šè¯¦ç»†çš„æ—¶é—´è®¡åˆ’",completed:!1},{title:"ä¸Žæœ‹å‹äº¤æµ",description:"ä¸»åŠ¨ä¸Žä¸€ä½æœ‹å‹åˆ†äº«è¿‘æœŸçš„æ„Ÿå—",completed:!1},{title:"è¯„ä¼°è¿›å±•",description:"å›žé¡¾æœ¬å‘¨çš„æƒ…ç»ªå˜åŒ–å’Œåº”å¯¹æ•ˆæžœ",completed:!1},{title:"è°ƒæ•´ç­–ç•¥",description:"æ ¹æ®ä¸€å‘¨çš„å®žè·µè°ƒæ•´åº”å¯¹ç­–ç•¥",completed:!1}]}},1e3)}},L=(e,t)=>{const a=t[0];return{timestamp:Date.now(),recordId:a.id,primaryEmotion:{name:N(a.emotion_type),icon:O(a.emotion_type),confidence:e.confidence||85},emotionSpectrum:G(a,e),insights:H(e.insights||[]),suggestions:K(e.suggestions||{}),trend:Q(e.trend||{}),deepAnalysis:U(e.deep_analysis||{}),actionPlan:V(e.action_plan||[])}},N=e=>({happy:"å¿«ä¹",sad:"æ‚²ä¼¤",angry:"æ„¤æ€’",anxious:"ç„¦è™‘",calm:"å¹³é™",fearful:"ææƒ§"}[e]||"æœªçŸ¥"),O=e=>({happy:"ðŸ˜„",sad:"ðŸ˜¢",angry:"ðŸ˜¡",anxious:"ðŸ˜Ÿ",calm:"ðŸ˜Œ",fearful:"ðŸ˜¨"}[e]||"ðŸ˜"),G=(e,t)=>{const a=t.emotion_spectrum||[];if(a.length>0)return a.map(e=>({name:N(e.emotion),percentage:Math.round(100*e.confidence)}));const s=e.intensity||5;return[{name:N(e.emotion_type),percentage:10*s},{name:"ä¸­æ€§",percentage:Math.max(0,100-10*s)}]},H=e=>0===e.length?[{type:"pattern",icon:"ðŸ”",title:"æƒ…ç»ªæ¨¡å¼è¯†åˆ«",content:"æ­£åœ¨åˆ†æžæ‚¨çš„æƒ…ç»ªæ¨¡å¼ï¼Œè¯·å¤šè®°å½•å‡ æ¬¡ä»¥èŽ·å¾—æ›´å‡†ç¡®çš„åˆ†æžã€‚"}]:e.map(e=>({type:e.type||"general",icon:J(e.type),title:e.title||"AIæ´žå¯Ÿ",content:e.content||e.description||""})),J=e=>({pattern:"ðŸ”",trigger:"âš¡",strength:"ðŸ’ª",recommendation:"ðŸ’¡",trend:"ðŸ“ˆ",warning:"âš ï¸"}[e]||"ðŸ’­"),K=e=>{const t={immediate:[{id:1,title:"æ·±å‘¼å¸ç»ƒä¹ ",description:"è¿›è¡Œ3-5æ¬¡æ·±å‘¼å¸ï¼Œå¸®åŠ©å¿«é€Ÿç¼“è§£ç´§å¼ æƒ…ç»ªã€‚",difficulty:"easy"}],longterm:[{id:2,title:"æƒ…ç»ªæ—¥è®°",description:"åšæŒè®°å½•æƒ…ç»ªå˜åŒ–ï¼Œæé«˜æƒ…ç»ªè§‰å¯Ÿèƒ½åŠ›ã€‚",difficulty:"medium"}],lifestyle:[{id:3,title:"è§„å¾‹ä½œæ¯",description:"ä¿æŒè§„å¾‹çš„ç¡çœ å’Œé¥®é£Ÿä¹ æƒ¯ã€‚",difficulty:"medium"}],social:[{id:4,title:"å¯»æ±‚æ”¯æŒ",description:"ä¸Žä¿¡ä»»çš„äººåˆ†äº«ä½ çš„æ„Ÿå—ã€‚",difficulty:"easy"}]};return{immediate:e.immediate||t.immediate,longterm:e.longterm||t.longterm,lifestyle:e.lifestyle||t.lifestyle,social:e.social||t.social}},Q=e=>({average:e.average||5,volatility:e.volatility||"ä¸­ç­‰",direction:e.direction||"ç¨³å®š"}),U=e=>({score:e.score||70,dimensions:e.dimensions||[{name:"æƒ…ç»ªè§‰å¯Ÿ",score:7,description:"èƒ½å¤Ÿè¯†åˆ«è‡ªå·±çš„æƒ…ç»ªçŠ¶æ€"},{name:"åº”å¯¹ç­–ç•¥",score:6,description:"å…·å¤‡åŸºæœ¬çš„æƒ…ç»ªè°ƒèŠ‚èƒ½åŠ›"}]}),V=e=>0===e.length?[{title:"è®°å½•æƒ…ç»ª",description:"æ¯å¤©è®°å½•ä¸€æ¬¡æƒ…ç»ªçŠ¶æ€",completed:!1},{title:"ç»ƒä¹ æ”¾æ¾",description:"å°è¯•æ·±å‘¼å¸æˆ–å†¥æƒ³",completed:!1},{title:"è¯„ä¼°è¿›å±•",description:"å›žé¡¾ä¸€å‘¨çš„æƒ…ç»ªå˜åŒ–",completed:!1}]:e.map(e=>({title:e.title||e.name||"",description:e.description||"",completed:e.completed||!1}));return s(()=>{const e=i(),t=(e[e.length-1].options||{}).recordId;F(t)}),(e,t)=>{const a=g,s=v,i=h,b=w;return l(),n(s,{class:"container"},{default:c(()=>[o(" é¡µé¢å¤´éƒ¨ "),A.value?o("v-if",!0):(l(),n(s,{key:0,class:"page-header"},{default:c(()=>[d(s,{class:"header-left"},{default:c(()=>[d(a,{class:"page-title"},{default:c(()=>[u("AIåˆ†æžæŠ¥å‘Š")]),_:1}),d(s,{class:"analysis-status-section"},{default:c(()=>{var e;return[d(a,{class:"analysis-status"},{default:c(()=>[u("âœ¨ æ™ºèƒ½åˆ†æžå®Œæˆ")]),_:1}),d(s,{class:r(["ai-status-badge",{"ai-powered":null==(e=I.value)?void 0:e.ai_powered}])},{default:c(()=>[d(a,{class:"status-icon"},{default:c(()=>{return[u(m((e=I.value,(null==e?void 0:e.ai_powered)?"ðŸ¤–":"ðŸ“Š")),1)];var e}),_:1}),d(a,{class:"status-text"},{default:c(()=>{return[u(m((e=I.value,(null==e?void 0:e.ai_powered)?"AIé©±åŠ¨":"æ•°æ®åˆ†æž")),1)];var e}),_:1})]),_:1},8,["class"])]}),_:1})]),_:1}),d(s,{class:"header-actions"},{default:c(()=>[d(i,{class:"header-btn",onClick:z},{default:c(()=>[d(a,{class:"btn-icon"},{default:c(()=>[u("ðŸ’¾")]),_:1}),d(a,{class:"btn-text"},{default:c(()=>[u("ä¿å­˜")]),_:1})]),_:1}),d(i,{class:"header-btn",onClick:q},{default:c(()=>[d(a,{class:"btn-icon"},{default:c(()=>[u("ðŸ”„")]),_:1}),d(a,{class:"btn-text"},{default:c(()=>[u("é‡æ–°åˆ†æž")]),_:1})]),_:1})]),_:1})]),_:1})),o(" åŠ è½½çŠ¶æ€ "),A.value?(l(),n(s,{key:1,class:"loading-section"},{default:c(()=>[d(s,{class:"loading-animation"},{default:c(()=>[d(s,{class:"loading-dots"},{default:c(()=>[d(s,{class:"dot"}),d(s,{class:"dot"}),d(s,{class:"dot"})]),_:1}),d(a,{class:"loading-text"},{default:c(()=>[u("AIæ­£åœ¨åˆ†æžä¸­...")]),_:1})]),_:1})]),_:1})):(l(),f(p,{key:2},[o(" åˆ†æžç»“æžœ "),d(s,{class:"analysis-content"},{default:c(()=>[o(" æƒ…ç»ªæ¦‚è§ˆå¡ç‰‡ "),d(s,{class:"emotion-overview"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("æƒ…ç»ªåˆ†æž")]),_:1}),d(a,{class:"analysis-time"},{default:c(()=>[u(m(M(I.value.timestamp)),1)]),_:1})]),_:1}),d(s,{class:"primary-emotion"},{default:c(()=>[d(a,{class:"emotion-icon"},{default:c(()=>[u(m(I.value.primaryEmotion.icon),1)]),_:1}),d(s,{class:"emotion-details"},{default:c(()=>[d(a,{class:"emotion-name"},{default:c(()=>[u(m(I.value.primaryEmotion.name),1)]),_:1}),d(a,{class:"emotion-confidence"},{default:c(()=>[u("ç½®ä¿¡åº¦: "+m(I.value.primaryEmotion.confidence)+"%",1)]),_:1})]),_:1})]),_:1}),I.value.emotionSpectrum?(l(),n(s,{key:0,class:"emotion-spectrum"},{default:c(()=>[d(a,{class:"spectrum-title"},{default:c(()=>[u("æƒ…ç»ªå…‰è°±")]),_:1}),d(s,{class:"spectrum-bars"},{default:c(()=>[(l(!0),f(p,null,_(I.value.emotionSpectrum,e=>(l(),n(s,{class:"spectrum-item",key:e.name},{default:c(()=>[d(a,{class:"spectrum-name"},{default:c(()=>[u(m(e.name),1)]),_:2},1024),d(s,{class:"spectrum-bar"},{default:c(()=>[d(s,{class:"spectrum-fill",style:k({width:e.percentage+"%"})},null,8,["style"])]),_:2},1024),d(a,{class:"spectrum-value"},{default:c(()=>[u(m(e.percentage)+"%",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):o("v-if",!0)]),_:1}),o(" AIæ´žå¯Ÿ "),d(s,{class:"ai-insights"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("AIæ´žå¯Ÿ")]),_:1}),d(a,{class:"ai-badge"},{default:c(()=>[u("âœ¨ AIåˆ†æž")]),_:1})]),_:1}),(l(!0),f(p,null,_(I.value.insights,e=>(l(),n(s,{class:"insight-item",key:e.type},{default:c(()=>[d(s,{class:"insight-header"},{default:c(()=>[d(a,{class:"insight-icon"},{default:c(()=>[u(m(e.icon),1)]),_:2},1024),d(a,{class:"insight-title"},{default:c(()=>[u(m(e.title),1)]),_:2},1024),d(i,{class:"insight-share-btn",onClick:t=>{return a=e,void uni.setClipboardData({data:`AIæ´žå¯Ÿ: ${a.content}`,success:()=>{uni.showToast({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",icon:"success"})}});var a}},{default:c(()=>[d(a,{class:"share-icon"},{default:c(()=>[u("ðŸ“‹")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),d(a,{class:"insight-content"},{default:c(()=>[u(m(e.content),1)]),_:2},1024),e.actionable?(l(),n(s,{key:0,class:"insight-actions"},{default:c(()=>[d(i,{class:"insight-action-btn",onClick:t=>(e=>{uni.showToast({title:"å·²æ·»åŠ åˆ°è¡ŒåŠ¨è®¡åˆ’",icon:"success"});const t={title:`å®žè·µï¼š${e.title}`,description:e.content,completed:!1};I.value.actionPlan&&I.value.actionPlan.push(t)})(e)},{default:c(()=>[u(" åº”ç”¨å»ºè®® ")]),_:2},1032,["onClick"])]),_:2},1024)):o("v-if",!0)]),_:2},1024))),128))]),_:1}),o(" ä¸ªæ€§åŒ–å»ºè®® "),d(s,{class:"suggestions"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("ä¸ªæ€§åŒ–å»ºè®®")]),_:1})]),_:1}),d(s,{class:"suggestion-tabs"},{default:c(()=>[(l(!0),f(p,null,_(S.value,(e,t)=>(l(),n(s,{class:r(["tab-item",{active:T.value===t}]),key:e.type,onClick:e=>(e=>{T.value=e})(t)},{default:c(()=>[d(a,{class:"tab-icon"},{default:c(()=>[u(m(e.icon),1)]),_:2},1024),d(a,{class:"tab-text"},{default:c(()=>[u(m(e.title),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),d(s,{class:"suggestion-content"},{default:c(()=>[(l(!0),f(p,null,_(y(P),e=>(l(),n(s,{class:"suggestion-item",key:e.id},{default:c(()=>[d(s,{class:"suggestion-header"},{default:c(()=>[d(a,{class:"suggestion-title"},{default:c(()=>[u(m(e.title),1)]),_:2},1024),d(a,{class:r(["difficulty-tag",e.difficulty])},{default:c(()=>[u(m(D(e.difficulty)),1)]),_:2},1032,["class"])]),_:2},1024),d(a,{class:"suggestion-desc"},{default:c(()=>[u(m(e.description),1)]),_:2},1024),d(s,{class:"suggestion-actions"},{default:c(()=>[d(i,{class:"action-btn primary",onClick:t=>$(e)},{default:c(()=>[u(" è¯•è¯•çœ‹ ")]),_:2},1032,["onClick"]),d(i,{class:"action-btn secondary",onClick:e=>{uni.showToast({title:"å·²æ”¶è—",icon:"success"})}},{default:c(()=>[u(" æ”¶è— ")]),_:2},1032,["onClick"]),d(i,{class:"action-btn tertiary",onClick:t=>(e=>{uni.showModal({title:e.title,content:`${e.description}\n\néš¾åº¦ï¼š${D(e.difficulty)}\n\næ˜¯å¦è¦å°†æ­¤å»ºè®®æ·»åŠ åˆ°ä»Šæ—¥è®¡åˆ’ä¸­ï¼Ÿ`,confirmText:"æ·»åŠ ",cancelText:"å–æ¶ˆ",success:t=>{t.confirm&&$(e)}})})(e)},{default:c(()=>[u(" è¯¦æƒ… ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),o(" æƒ…ç»ªè¶‹åŠ¿ "),I.value.trend?(l(),n(s,{key:0,class:"emotion-trend"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("æƒ…ç»ªè¶‹åŠ¿")]),_:1}),d(a,{class:"trend-period"},{default:c(()=>[u("è¿‘7å¤©")]),_:1})]),_:1}),d(s,{class:"trend-chart"},{default:c(()=>[d(b,{"canvas-id":"trendChart",class:"chart-canvas",onTouchstart:B})]),_:1}),d(s,{class:"trend-summary"},{default:c(()=>[d(s,{class:"trend-item"},{default:c(()=>[d(a,{class:"trend-label"},{default:c(()=>[u("å¹³å‡æƒ…ç»ª")]),_:1}),d(a,{class:"trend-value"},{default:c(()=>[u(m(I.value.trend.average)+"/10",1)]),_:1})]),_:1}),d(s,{class:"trend-item"},{default:c(()=>[d(a,{class:"trend-label"},{default:c(()=>[u("æ³¢åŠ¨ç¨‹åº¦")]),_:1}),d(a,{class:"trend-value"},{default:c(()=>[u(m(I.value.trend.volatility),1)]),_:1})]),_:1}),d(s,{class:"trend-item"},{default:c(()=>{return[d(a,{class:"trend-label"},{default:c(()=>[u("æ”¹å–„è¶‹åŠ¿")]),_:1}),d(a,{class:r(["trend-value",(e=I.value.trend.direction,"ä¸Šå‡"===e?"trend-up":"ä¸‹é™"===e?"trend-down":"trend-stable")])},{default:c(()=>[u(m(E(I.value.trend.direction)),1)]),_:1},8,["class"])];var e}),_:1})]),_:1})]),_:1})):o("v-if",!0),o(" æ·±åº¦åˆ†æžç»“æžœ "),I.value.deepAnalysis?(l(),n(s,{key:1,class:"deep-analysis"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("æ·±åº¦åˆ†æž")]),_:1}),d(a,{class:"analysis-score"},{default:c(()=>[u("åˆ†æžå¾—åˆ†: "+m(I.value.deepAnalysis.score)+"/100",1)]),_:1})]),_:1}),d(s,{class:"analysis-dimensions"},{default:c(()=>[(l(!0),f(p,null,_(I.value.deepAnalysis.dimensions,e=>(l(),n(s,{class:"dimension-item",key:e.name},{default:c(()=>[d(s,{class:"dimension-header"},{default:c(()=>[d(a,{class:"dimension-name"},{default:c(()=>[u(m(e.name),1)]),_:2},1024),d(a,{class:"dimension-score"},{default:c(()=>[u(m(e.score)+"/10",1)]),_:2},1024)]),_:2},1024),d(s,{class:"dimension-bar"},{default:c(()=>[d(s,{class:"dimension-fill",style:k({width:e.score/10*100+"%"})},null,8,["style"])]),_:2},1024),d(a,{class:"dimension-desc"},{default:c(()=>[u(m(e.description),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):o("v-if",!0),o(" è¡ŒåŠ¨è®¡åˆ’ "),d(s,{class:"action-plan"},{default:c(()=>[d(s,{class:"card-header"},{default:c(()=>[d(a,{class:"card-title"},{default:c(()=>[u("è¡ŒåŠ¨è®¡åˆ’")]),_:1}),d(a,{class:"plan-duration"},{default:c(()=>[u("7å¤©è®¡åˆ’")]),_:1})]),_:1}),d(s,{class:"plan-timeline"},{default:c(()=>[(l(!0),f(p,null,_(I.value.actionPlan,(e,t)=>(l(),n(s,{class:"timeline-item",key:t},{default:c(()=>[d(s,{class:r(["timeline-dot",{completed:e.completed}])},null,8,["class"]),d(s,{class:"timeline-content"},{default:c(()=>[d(a,{class:"timeline-date"},{default:c(()=>[u("ç¬¬"+m(t+1)+"å¤©",1)]),_:2},1024),d(a,{class:"timeline-title"},{default:c(()=>[u(m(e.title),1)]),_:2},1024),d(a,{class:"timeline-desc"},{default:c(()=>[u(m(e.description),1)]),_:2},1024),e.completed?o("v-if",!0):(l(),n(s,{key:0,class:"timeline-actions"},{default:c(()=>[d(i,{class:"complete-btn",onClick:e=>(e=>{I.value.actionPlan&&I.value.actionPlan[e]&&(I.value.actionPlan[e].completed=!0,uni.showToast({title:"ä»»åŠ¡å®Œæˆï¼",icon:"success"}))})(t)},{default:c(()=>[u(" å®Œæˆ ")]),_:2},1032,["onClick"])]),_:2},1024))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})],2112)),o(" åº•éƒ¨æ“ä½œ "),A.value?o("v-if",!0):(l(),n(s,{key:3,class:"bottom-actions"},{default:c(()=>[d(i,{class:"action-button secondary",onClick:j},{default:c(()=>[u(" åˆ†äº«åˆ†æž ")]),_:1}),d(i,{class:"action-button primary",onClick:R},{default:c(()=>[u(" æ–°çš„è®°å½• ")]),_:1})]),_:1}))]),_:1})}}}),[["__scopeId","data-v-fe0ee01d"]]);export{T as default};
