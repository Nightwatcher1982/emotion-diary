import{g as e,r as t,p as a,h as s,j as l,o as c,c as i,w as n,b as o,a as u,d,l as f,m as p,F as r,t as m,u as _,n as y,e as h,i as k,s as v,I as g,f as b,z as C}from"./index-6a23bec1.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";const w=V(e({__name:"feedback",setup(e){const V=t("bug"),w=t("medium"),T=t(!1),x=a({description:"",steps:[""],attachments:[],email:"",phone:""}),I=[{key:"bug",name:"é—®é¢˜åé¦ˆ",description:"åº”ç”¨å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸",icon:"ğŸ›"},{key:"feature",name:"åŠŸèƒ½å»ºè®®",description:"å¸Œæœ›æ·»åŠ æ–°åŠŸèƒ½",icon:"ğŸ’¡"},{key:"improvement",name:"æ”¹è¿›å»ºè®®",description:"ç°æœ‰åŠŸèƒ½çš„æ”¹è¿›æ„è§",icon:"âš¡"},{key:"ui",name:"ç•Œé¢é—®é¢˜",description:"ç•Œé¢æ˜¾ç¤ºæˆ–äº¤äº’é—®é¢˜",icon:"ğŸ¨"},{key:"performance",name:"æ€§èƒ½é—®é¢˜",description:"åº”ç”¨è¿è¡Œç¼“æ…¢æˆ–å¡é¡¿",icon:"ğŸš€"},{key:"other",name:"å…¶ä»–",description:"å…¶ä»–ç±»å‹çš„åé¦ˆ",icon:"ğŸ“"}],M=[{key:"low",name:"ä½",icon:"ğŸŸ¢"},{key:"medium",name:"ä¸­",icon:"ğŸŸ¡"},{key:"high",name:"é«˜",icon:"ğŸŸ "},{key:"urgent",name:"ç´§æ€¥",icon:"ğŸ”´"}],$=t({appVersion:"v1.0.0",systemVersion:"iOS 17.5",deviceModel:"iPhone 15 Pro",userId:"user_123456"}),A=t([{id:1,type:"bug",title:"ç™»å½•é¡µé¢æ— æ³•æ­£å¸¸æ˜¾ç¤º",status:"resolved",createdAt:"2024-06-20T10:30:00Z"},{id:2,type:"feature",title:"å¸Œæœ›æ·»åŠ å¤œé—´æ¨¡å¼",status:"processing",createdAt:"2024-06-18T14:20:00Z"},{id:3,type:"improvement",title:"æƒ…ç»ªè®°å½•é¡µé¢åŠ è½½ä¼˜åŒ–",status:"pending",createdAt:"2024-06-15T09:15:00Z"}]),D=s(()=>({bug:["åº”ç”¨å´©æºƒ","åŠŸèƒ½æ— æ³•ä½¿ç”¨","æ•°æ®æ˜¾ç¤ºé”™è¯¯","é¡µé¢åŠ è½½å¤±è´¥"],feature:["å¸Œæœ›æ·»åŠ ...","å»ºè®®å¢åŠ ...","æœŸæœ›æ”¯æŒ..."],improvement:["å»ºè®®ä¼˜åŒ–...","å¸Œæœ›æ”¹è¿›...","å¯ä»¥æ›´å¥½..."],ui:["ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸","æŒ‰é’®æ— æ³•ç‚¹å‡»","æ–‡å­—æ˜¾ç¤ºä¸å…¨","é¢œè‰²æ­é…é—®é¢˜"],performance:["å¯åŠ¨é€Ÿåº¦æ…¢","é¡µé¢å¡é¡¿","å†…å­˜å ç”¨é«˜","ç”µæ± æ¶ˆè€—å¿«"]}[V.value]||[])),U=s(()=>x.description.trim().length>=10),j=()=>{x.steps.push("")},z=()=>{uni.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths.forEach(e=>{x.attachments.push({name:`image_${Date.now()}.jpg`,url:e,type:"image"})})}})},F=()=>{T.value=!T.value},L=e=>{const t=I.find(t=>t.key===e);return t?t.icon:"ğŸ“"},P=e=>({pending:"å¾…å¤„ç†",processing:"å¤„ç†ä¸­",resolved:"å·²è§£å†³",closed:"å·²å…³é—­"}[e]||"æœªçŸ¥"),S=e=>{const t=new Date(e),a=(new Date).getTime()-t.getTime(),s=Math.floor(a/864e5);return 0===s?"ä»Šå¤©":1===s?"æ˜¨å¤©":s<7?`${s}å¤©å‰`:t.toLocaleDateString("zh-CN")},Z=()=>{uni.navigateTo({url:"/pages/help/feedback-history"})},B=()=>{U.value?(uni.showLoading({title:"æäº¤ä¸­..."}),setTimeout(()=>{uni.hideLoading(),uni.showModal({title:"æäº¤æˆåŠŸ",content:"æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†æ‚¨çš„é—®é¢˜ã€‚",showCancel:!1,success:()=>{x.description="",x.steps=[""],x.attachments=[],x.email="",x.phone="",V.value="bug",w.value="medium",setTimeout(()=>{uni.navigateBack()},1e3)}})},2e3)):uni.showToast({title:"è¯·å®Œå–„åé¦ˆå†…å®¹",icon:"none"})};return l(()=>{uni.getSystemInfo({success:e=>{$.value={appVersion:"v1.0.0",systemVersion:`${e.platform} ${e.system}`,deviceModel:e.model,userId:"user_123456"}}})}),(e,t)=>{const a=h,s=k,l=v,q=g,E=b,N=C;return c(),i(s,{class:"container"},{default:n(()=>[o(" é¡µé¢å¤´éƒ¨ "),u(s,{class:"page-header"},{default:n(()=>[u(a,{class:"page-title"},{default:n(()=>[d("æ„è§åé¦ˆ")]),_:1}),u(a,{class:"page-subtitle"},{default:n(()=>[d("æ‚¨çš„å»ºè®®æ˜¯æˆ‘ä»¬å‰è¿›çš„åŠ¨åŠ›")]),_:1})]),_:1}),o(" åé¦ˆç±»å‹é€‰æ‹© "),u(s,{class:"feedback-type-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("åé¦ˆç±»å‹")]),_:1}),u(s,{class:"type-options"},{default:n(()=>[(c(),f(r,null,p(I,e=>u(s,{class:y(["type-option",{selected:V.value===e.key}]),key:e.key,onClick:t=>(e=>{V.value=e})(e.key)},{default:n(()=>[u(a,{class:"type-icon"},{default:n(()=>[d(m(e.icon),1)]),_:2},1024),u(s,{class:"type-info"},{default:n(()=>[u(a,{class:"type-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024),u(a,{class:"type-desc"},{default:n(()=>[d(m(e.description),1)]),_:2},1024)]),_:2},1024),u(s,{class:"type-indicator"},{default:n(()=>[V.value===e.key?(c(),i(a,{key:0,class:"indicator"},{default:n(()=>[d("âœ“")]),_:1})):o("v-if",!0)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),o(" é—®é¢˜æè¿° "),u(s,{class:"description-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("é—®é¢˜æè¿°")]),_:1}),u(s,{class:"description-card"},{default:n(()=>[u(l,{modelValue:x.description,"onUpdate:modelValue":t[0]||(t[0]=e=>x.description=e),placeholder:"è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜æˆ–å»ºè®®...",class:"description-input",maxlength:"500","auto-height":""},null,8,["modelValue"]),u(a,{class:"char-count"},{default:n(()=>[d(m(x.description.length)+"/500",1)]),_:1}),o(" å¿«é€Ÿæ¨¡æ¿ "),_(D).length>0?(c(),i(s,{key:0,class:"quick-templates"},{default:n(()=>[u(a,{class:"template-title"},{default:n(()=>[d("å¿«é€Ÿæ¨¡æ¿")]),_:1}),u(s,{class:"template-list"},{default:n(()=>[(c(!0),f(r,null,p(_(D),e=>(c(),i(a,{class:"template-item",key:e,onClick:t=>(e=>{x.description=e})(e)},{default:n(()=>[d(m(e),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):o("v-if",!0)]),_:1})]),_:1}),o(" é‡ç°æ­¥éª¤ "),"bug"===V.value?(c(),i(s,{key:0,class:"steps-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("é‡ç°æ­¥éª¤")]),_:1}),u(s,{class:"steps-card"},{default:n(()=>[(c(!0),f(r,null,p(x.steps,(e,t)=>(c(),i(s,{class:"step-item",key:t},{default:n(()=>[u(s,{class:"step-number"},{default:n(()=>[d(m(t+1),1)]),_:2},1024),u(q,{modelValue:x.steps[t],"onUpdate:modelValue":e=>x.steps[t]=e,placeholder:"æè¿°æ“ä½œæ­¥éª¤...",class:"step-input"},null,8,["modelValue","onUpdate:modelValue"]),u(s,{class:"step-delete",onClick:e=>(e=>{x.steps.length>1&&x.steps.splice(e,1)})(t)},{default:n(()=>[d("Ã—")]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(E,{class:"add-step-btn",onClick:j},{default:n(()=>[u(a,{class:"add-icon"},{default:n(()=>[d("+")]),_:1}),u(a,{class:"add-text"},{default:n(()=>[d("æ·»åŠ æ­¥éª¤")]),_:1})]),_:1})]),_:1})]),_:1})):o("v-if",!0),o(" ä¼˜å…ˆçº§é€‰æ‹© "),u(s,{class:"priority-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("ä¼˜å…ˆçº§")]),_:1}),u(s,{class:"priority-options"},{default:n(()=>[(c(),f(r,null,p(M,e=>u(s,{class:y(["priority-option",{selected:w.value===e.key,[e.key]:!0}]),key:e.key,onClick:t=>(e=>{w.value=e})(e.key)},{default:n(()=>[u(a,{class:"priority-icon"},{default:n(()=>[d(m(e.icon),1)]),_:2},1024),u(a,{class:"priority-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),o(" é™„ä»¶ä¸Šä¼  "),u(s,{class:"attachment-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("é™„ä»¶ (å¯é€‰)")]),_:1}),u(s,{class:"attachment-card"},{default:n(()=>[u(s,{class:"attachment-grid"},{default:n(()=>[(c(!0),f(r,null,p(x.attachments,(e,t)=>(c(),i(s,{class:"attachment-item",key:t},{default:n(()=>["image"===e.type?(c(),i(N,{key:0,src:e.url,class:"attachment-preview",mode:"aspectFill"},null,8,["src"])):(c(),i(s,{key:1,class:"attachment-file"},{default:n(()=>[u(a,{class:"file-icon"},{default:n(()=>[d("ğŸ“„")]),_:1}),u(a,{class:"file-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024)]),_:2},1024)),u(s,{class:"attachment-delete",onClick:e=>(e=>{x.attachments.splice(e,1)})(t)},{default:n(()=>[d("Ã—")]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(s,{class:"add-attachment",onClick:z},{default:n(()=>[u(a,{class:"add-icon"},{default:n(()=>[d("+")]),_:1}),u(a,{class:"add-text"},{default:n(()=>[d("æ·»åŠ é™„ä»¶")]),_:1})]),_:1})]),_:1}),u(a,{class:"attachment-tip"},{default:n(()=>[d("æ”¯æŒå›¾ç‰‡ã€æ—¥å¿—æ–‡ä»¶ï¼Œæœ€å¤§5MB")]),_:1})]),_:1})]),_:1}),o(" è”ç³»æ–¹å¼ "),u(s,{class:"contact-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("è”ç³»æ–¹å¼ (å¯é€‰)")]),_:1}),u(s,{class:"contact-card"},{default:n(()=>[u(s,{class:"contact-item"},{default:n(()=>[u(a,{class:"contact-label"},{default:n(()=>[d("é‚®ç®±")]),_:1}),u(q,{modelValue:x.email,"onUpdate:modelValue":t[1]||(t[1]=e=>x.email=e),placeholder:"æ‚¨çš„é‚®ç®±åœ°å€",class:"contact-input",type:"email"},null,8,["modelValue"])]),_:1}),u(s,{class:"contact-item"},{default:n(()=>[u(a,{class:"contact-label"},{default:n(()=>[d("æ‰‹æœº")]),_:1}),u(q,{modelValue:x.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>x.phone=e),placeholder:"æ‚¨çš„æ‰‹æœºå·ç ",class:"contact-input",type:"number"},null,8,["modelValue"])]),_:1}),u(s,{class:"contact-note"},{default:n(()=>[u(a,{class:"note-text"},{default:n(()=>[d("ç•™ä¸‹è”ç³»æ–¹å¼ï¼Œæˆ‘ä»¬ä¼šåŠæ—¶å›å¤æ‚¨çš„åé¦ˆ")]),_:1})]),_:1})]),_:1})]),_:1}),o(" ç³»ç»Ÿä¿¡æ¯ "),u(s,{class:"system-info-section"},{default:n(()=>[u(s,{class:"info-header",onClick:F},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("ç³»ç»Ÿä¿¡æ¯")]),_:1}),u(a,{class:y(["toggle-icon",{expanded:T.value}])},{default:n(()=>[d("â–¼")]),_:1},8,["class"])]),_:1}),T.value?(c(),i(s,{key:0,class:"system-info-card"},{default:n(()=>[u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("åº”ç”¨ç‰ˆæœ¬")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.appVersion),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("ç³»ç»Ÿç‰ˆæœ¬")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.systemVersion),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("è®¾å¤‡å‹å·")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.deviceModel),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("ç”¨æˆ·ID")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.userId),1)]),_:1})]),_:1})]),_:1})):o("v-if",!0)]),_:1}),o(" å†å²åé¦ˆ "),u(s,{class:"history-section"},{default:n(()=>[u(s,{class:"history-header"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("å†å²åé¦ˆ")]),_:1}),u(a,{class:"view-all",onClick:Z},{default:n(()=>[d("æŸ¥çœ‹å…¨éƒ¨")]),_:1})]),_:1}),u(s,{class:"history-list"},{default:n(()=>[(c(!0),f(r,null,p(A.value,e=>(c(),i(s,{class:"history-item",key:e.id,onClick:t=>(e=>{uni.showModal({title:e.title,content:`çŠ¶æ€ï¼š${P(e.status)}\næäº¤æ—¶é—´ï¼š${S(e.createdAt)}`,showCancel:!1})})(e)},{default:n(()=>[u(s,{class:"history-icon"},{default:n(()=>[d(m(L(e.type)),1)]),_:2},1024),u(s,{class:"history-info"},{default:n(()=>[u(a,{class:"history-title"},{default:n(()=>[d(m(e.title),1)]),_:2},1024),u(a,{class:"history-time"},{default:n(()=>[d(m(S(e.createdAt)),1)]),_:2},1024)]),_:2},1024),u(s,{class:y(["history-status",e.status])},{default:n(()=>[u(a,{class:"status-text"},{default:n(()=>[d(m(P(e.status)),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),o(" æäº¤æŒ‰é’® "),u(s,{class:"submit-section"},{default:n(()=>[u(E,{class:y(["submit-button",{disabled:!_(U)}]),onClick:B,disabled:!_(U)},{default:n(()=>[d(" æäº¤åé¦ˆ ")]),_:1},8,["class","disabled"]),u(s,{class:"submit-tips"},{default:n(()=>[u(a,{class:"tips-text"},{default:n(()=>[d("æäº¤å‰è¯·ç¡®ä¿ä¿¡æ¯å‡†ç¡®å®Œæ•´")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-df4175ca"]]);export{w as default};
