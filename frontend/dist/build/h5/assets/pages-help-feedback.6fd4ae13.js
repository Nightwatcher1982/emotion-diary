import{g as e,r as t,p as a,h as s,j as l,o as c,c as i,w as n,b as o,a as u,d,l as f,m as p,F as r,t as m,u as _,n as y,e as h,i as k,s as v,I as g,f as b,z as C}from"./index-6a23bec1.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";const w=V(e({__name:"feedback",setup(e){const V=t("bug"),w=t("medium"),T=t(!1),x=a({description:"",steps:[""],attachments:[],email:"",phone:""}),I=[{key:"bug",name:"问题反馈",description:"应用出现错误或异常",icon:"🐛"},{key:"feature",name:"功能建议",description:"希望添加新功能",icon:"💡"},{key:"improvement",name:"改进建议",description:"现有功能的改进意见",icon:"⚡"},{key:"ui",name:"界面问题",description:"界面显示或交互问题",icon:"🎨"},{key:"performance",name:"性能问题",description:"应用运行缓慢或卡顿",icon:"🚀"},{key:"other",name:"其他",description:"其他类型的反馈",icon:"📝"}],M=[{key:"low",name:"低",icon:"🟢"},{key:"medium",name:"中",icon:"🟡"},{key:"high",name:"高",icon:"🟠"},{key:"urgent",name:"紧急",icon:"🔴"}],$=t({appVersion:"v1.0.0",systemVersion:"iOS 17.5",deviceModel:"iPhone 15 Pro",userId:"user_123456"}),A=t([{id:1,type:"bug",title:"登录页面无法正常显示",status:"resolved",createdAt:"2024-06-20T10:30:00Z"},{id:2,type:"feature",title:"希望添加夜间模式",status:"processing",createdAt:"2024-06-18T14:20:00Z"},{id:3,type:"improvement",title:"情绪记录页面加载优化",status:"pending",createdAt:"2024-06-15T09:15:00Z"}]),D=s(()=>({bug:["应用崩溃","功能无法使用","数据显示错误","页面加载失败"],feature:["希望添加...","建议增加...","期望支持..."],improvement:["建议优化...","希望改进...","可以更好..."],ui:["界面显示异常","按钮无法点击","文字显示不全","颜色搭配问题"],performance:["启动速度慢","页面卡顿","内存占用高","电池消耗快"]}[V.value]||[])),U=s(()=>x.description.trim().length>=10),j=()=>{x.steps.push("")},z=()=>{uni.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths.forEach(e=>{x.attachments.push({name:`image_${Date.now()}.jpg`,url:e,type:"image"})})}})},F=()=>{T.value=!T.value},L=e=>{const t=I.find(t=>t.key===e);return t?t.icon:"📝"},P=e=>({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"}[e]||"未知"),S=e=>{const t=new Date(e),a=(new Date).getTime()-t.getTime(),s=Math.floor(a/864e5);return 0===s?"今天":1===s?"昨天":s<7?`${s}天前`:t.toLocaleDateString("zh-CN")},Z=()=>{uni.navigateTo({url:"/pages/help/feedback-history"})},B=()=>{U.value?(uni.showLoading({title:"提交中..."}),setTimeout(()=>{uni.hideLoading(),uni.showModal({title:"提交成功",content:"感谢您的反馈！我们会尽快处理您的问题。",showCancel:!1,success:()=>{x.description="",x.steps=[""],x.attachments=[],x.email="",x.phone="",V.value="bug",w.value="medium",setTimeout(()=>{uni.navigateBack()},1e3)}})},2e3)):uni.showToast({title:"请完善反馈内容",icon:"none"})};return l(()=>{uni.getSystemInfo({success:e=>{$.value={appVersion:"v1.0.0",systemVersion:`${e.platform} ${e.system}`,deviceModel:e.model,userId:"user_123456"}}})}),(e,t)=>{const a=h,s=k,l=v,q=g,E=b,N=C;return c(),i(s,{class:"container"},{default:n(()=>[o(" 页面头部 "),u(s,{class:"page-header"},{default:n(()=>[u(a,{class:"page-title"},{default:n(()=>[d("意见反馈")]),_:1}),u(a,{class:"page-subtitle"},{default:n(()=>[d("您的建议是我们前进的动力")]),_:1})]),_:1}),o(" 反馈类型选择 "),u(s,{class:"feedback-type-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("反馈类型")]),_:1}),u(s,{class:"type-options"},{default:n(()=>[(c(),f(r,null,p(I,e=>u(s,{class:y(["type-option",{selected:V.value===e.key}]),key:e.key,onClick:t=>(e=>{V.value=e})(e.key)},{default:n(()=>[u(a,{class:"type-icon"},{default:n(()=>[d(m(e.icon),1)]),_:2},1024),u(s,{class:"type-info"},{default:n(()=>[u(a,{class:"type-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024),u(a,{class:"type-desc"},{default:n(()=>[d(m(e.description),1)]),_:2},1024)]),_:2},1024),u(s,{class:"type-indicator"},{default:n(()=>[V.value===e.key?(c(),i(a,{key:0,class:"indicator"},{default:n(()=>[d("✓")]),_:1})):o("v-if",!0)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),o(" 问题描述 "),u(s,{class:"description-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("问题描述")]),_:1}),u(s,{class:"description-card"},{default:n(()=>[u(l,{modelValue:x.description,"onUpdate:modelValue":t[0]||(t[0]=e=>x.description=e),placeholder:"请详细描述您遇到的问题或建议...",class:"description-input",maxlength:"500","auto-height":""},null,8,["modelValue"]),u(a,{class:"char-count"},{default:n(()=>[d(m(x.description.length)+"/500",1)]),_:1}),o(" 快速模板 "),_(D).length>0?(c(),i(s,{key:0,class:"quick-templates"},{default:n(()=>[u(a,{class:"template-title"},{default:n(()=>[d("快速模板")]),_:1}),u(s,{class:"template-list"},{default:n(()=>[(c(!0),f(r,null,p(_(D),e=>(c(),i(a,{class:"template-item",key:e,onClick:t=>(e=>{x.description=e})(e)},{default:n(()=>[d(m(e),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):o("v-if",!0)]),_:1})]),_:1}),o(" 重现步骤 "),"bug"===V.value?(c(),i(s,{key:0,class:"steps-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("重现步骤")]),_:1}),u(s,{class:"steps-card"},{default:n(()=>[(c(!0),f(r,null,p(x.steps,(e,t)=>(c(),i(s,{class:"step-item",key:t},{default:n(()=>[u(s,{class:"step-number"},{default:n(()=>[d(m(t+1),1)]),_:2},1024),u(q,{modelValue:x.steps[t],"onUpdate:modelValue":e=>x.steps[t]=e,placeholder:"描述操作步骤...",class:"step-input"},null,8,["modelValue","onUpdate:modelValue"]),u(s,{class:"step-delete",onClick:e=>(e=>{x.steps.length>1&&x.steps.splice(e,1)})(t)},{default:n(()=>[d("×")]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(E,{class:"add-step-btn",onClick:j},{default:n(()=>[u(a,{class:"add-icon"},{default:n(()=>[d("+")]),_:1}),u(a,{class:"add-text"},{default:n(()=>[d("添加步骤")]),_:1})]),_:1})]),_:1})]),_:1})):o("v-if",!0),o(" 优先级选择 "),u(s,{class:"priority-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("优先级")]),_:1}),u(s,{class:"priority-options"},{default:n(()=>[(c(),f(r,null,p(M,e=>u(s,{class:y(["priority-option",{selected:w.value===e.key,[e.key]:!0}]),key:e.key,onClick:t=>(e=>{w.value=e})(e.key)},{default:n(()=>[u(a,{class:"priority-icon"},{default:n(()=>[d(m(e.icon),1)]),_:2},1024),u(a,{class:"priority-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),o(" 附件上传 "),u(s,{class:"attachment-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("附件 (可选)")]),_:1}),u(s,{class:"attachment-card"},{default:n(()=>[u(s,{class:"attachment-grid"},{default:n(()=>[(c(!0),f(r,null,p(x.attachments,(e,t)=>(c(),i(s,{class:"attachment-item",key:t},{default:n(()=>["image"===e.type?(c(),i(N,{key:0,src:e.url,class:"attachment-preview",mode:"aspectFill"},null,8,["src"])):(c(),i(s,{key:1,class:"attachment-file"},{default:n(()=>[u(a,{class:"file-icon"},{default:n(()=>[d("📄")]),_:1}),u(a,{class:"file-name"},{default:n(()=>[d(m(e.name),1)]),_:2},1024)]),_:2},1024)),u(s,{class:"attachment-delete",onClick:e=>(e=>{x.attachments.splice(e,1)})(t)},{default:n(()=>[d("×")]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(s,{class:"add-attachment",onClick:z},{default:n(()=>[u(a,{class:"add-icon"},{default:n(()=>[d("+")]),_:1}),u(a,{class:"add-text"},{default:n(()=>[d("添加附件")]),_:1})]),_:1})]),_:1}),u(a,{class:"attachment-tip"},{default:n(()=>[d("支持图片、日志文件，最大5MB")]),_:1})]),_:1})]),_:1}),o(" 联系方式 "),u(s,{class:"contact-section"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("联系方式 (可选)")]),_:1}),u(s,{class:"contact-card"},{default:n(()=>[u(s,{class:"contact-item"},{default:n(()=>[u(a,{class:"contact-label"},{default:n(()=>[d("邮箱")]),_:1}),u(q,{modelValue:x.email,"onUpdate:modelValue":t[1]||(t[1]=e=>x.email=e),placeholder:"您的邮箱地址",class:"contact-input",type:"email"},null,8,["modelValue"])]),_:1}),u(s,{class:"contact-item"},{default:n(()=>[u(a,{class:"contact-label"},{default:n(()=>[d("手机")]),_:1}),u(q,{modelValue:x.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>x.phone=e),placeholder:"您的手机号码",class:"contact-input",type:"number"},null,8,["modelValue"])]),_:1}),u(s,{class:"contact-note"},{default:n(()=>[u(a,{class:"note-text"},{default:n(()=>[d("留下联系方式，我们会及时回复您的反馈")]),_:1})]),_:1})]),_:1})]),_:1}),o(" 系统信息 "),u(s,{class:"system-info-section"},{default:n(()=>[u(s,{class:"info-header",onClick:F},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("系统信息")]),_:1}),u(a,{class:y(["toggle-icon",{expanded:T.value}])},{default:n(()=>[d("▼")]),_:1},8,["class"])]),_:1}),T.value?(c(),i(s,{key:0,class:"system-info-card"},{default:n(()=>[u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("应用版本")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.appVersion),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("系统版本")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.systemVersion),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("设备型号")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.deviceModel),1)]),_:1})]),_:1}),u(s,{class:"info-item"},{default:n(()=>[u(a,{class:"info-label"},{default:n(()=>[d("用户ID")]),_:1}),u(a,{class:"info-value"},{default:n(()=>[d(m($.value.userId),1)]),_:1})]),_:1})]),_:1})):o("v-if",!0)]),_:1}),o(" 历史反馈 "),u(s,{class:"history-section"},{default:n(()=>[u(s,{class:"history-header"},{default:n(()=>[u(a,{class:"section-title"},{default:n(()=>[d("历史反馈")]),_:1}),u(a,{class:"view-all",onClick:Z},{default:n(()=>[d("查看全部")]),_:1})]),_:1}),u(s,{class:"history-list"},{default:n(()=>[(c(!0),f(r,null,p(A.value,e=>(c(),i(s,{class:"history-item",key:e.id,onClick:t=>(e=>{uni.showModal({title:e.title,content:`状态：${P(e.status)}\n提交时间：${S(e.createdAt)}`,showCancel:!1})})(e)},{default:n(()=>[u(s,{class:"history-icon"},{default:n(()=>[d(m(L(e.type)),1)]),_:2},1024),u(s,{class:"history-info"},{default:n(()=>[u(a,{class:"history-title"},{default:n(()=>[d(m(e.title),1)]),_:2},1024),u(a,{class:"history-time"},{default:n(()=>[d(m(S(e.createdAt)),1)]),_:2},1024)]),_:2},1024),u(s,{class:y(["history-status",e.status])},{default:n(()=>[u(a,{class:"status-text"},{default:n(()=>[d(m(P(e.status)),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),o(" 提交按钮 "),u(s,{class:"submit-section"},{default:n(()=>[u(E,{class:y(["submit-button",{disabled:!_(U)}]),onClick:B,disabled:!_(U)},{default:n(()=>[d(" 提交反馈 ")]),_:1},8,["class","disabled"]),u(s,{class:"submit-tips"},{default:n(()=>[u(a,{class:"tips-text"},{default:n(()=>[d("提交前请确保信息准确完整")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-df4175ca"]]);export{w as default};
