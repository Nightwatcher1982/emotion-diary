import{g as e,r as a,h as l,j as t,o as s,c as i,w as n,b as r,a as o,d as c,t as u,u as d,k as v,l as f,m,F as _,n as k,C as p,e as y,i as g,S as h,f as w}from"./index-6afd3b48.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const C=b(e({__name:"index",setup(e){const b=a("all"),C=a(!1),x=a(null),A=a({total:48,unlocked:12,points:850,rank:"情绪探索者"}),T=[{key:"all",name:"全部",icon:"🏆"},{key:"record",name:"记录",icon:"📝"},{key:"analysis",name:"分析",icon:"📊"},{key:"streak",name:"坚持",icon:"🔥"},{key:"social",name:"社交",icon:"👥"},{key:"milestone",name:"里程碑",icon:"🎯"},{key:"special",name:"特殊",icon:"⭐"}],q=[{name:"情绪新手",requiredPoints:0},{name:"情绪学徒",requiredPoints:100},{name:"情绪探索者",requiredPoints:500},{name:"情绪分析师",requiredPoints:1e3},{name:"情绪大师",requiredPoints:2e3},{name:"情绪导师",requiredPoints:5e3}],P=a([{id:1,name:"初次记录",description:"完成第一次情绪记录",icon:"🌱",points:10,rarity:"common",category:"record",unlocked:!0,unlockedAt:"2024-06-01T10:30:00Z",hint:"开始你的情绪记录之旅"},{id:2,name:"坚持一周",description:"连续7天记录情绪",icon:"🔥",points:50,rarity:"rare",category:"streak",unlocked:!0,unlockedAt:"2024-06-08T09:15:00Z",hint:"保持记录的习惯"},{id:3,name:"AI分析师",description:"使用AI分析功能10次",icon:"🤖",points:30,rarity:"common",category:"analysis",unlocked:!1,progress:6,target:10,hint:"多使用AI分析功能了解自己"},{id:4,name:"情绪光谱",description:"记录所有7种基础情绪",icon:"🌈",points:80,rarity:"epic",category:"milestone",unlocked:!1,progress:5,target:7,hint:"体验更多元的情绪"},{id:5,name:"深度思考者",description:"完成50次深度分析",icon:"🧠",points:100,rarity:"epic",category:"analysis",unlocked:!1,progress:23,target:50,hint:"深入探索内心世界"},{id:6,name:"月度坚持者",description:"连续30天记录情绪",icon:"📅",points:200,rarity:"legendary",category:"streak",unlocked:!1,progress:18,target:30,hint:"养成长期记录的好习惯"},{id:7,name:"社交达人",description:"分享成就5次",icon:"📢",points:40,rarity:"rare",category:"social",unlocked:!0,unlockedAt:"2024-06-15T14:20:00Z",hint:"与朋友分享你的成长"},{id:8,name:"午夜记录者",description:"在午夜12点记录情绪",icon:"🌙",points:25,rarity:"rare",category:"special",unlocked:!1,hint:"在特殊时刻记录特殊心情"}]),D=a([{id:7,name:"社交达人",icon:"📢",unlockedAt:"2024-06-15T14:20:00Z"},{id:2,name:"坚持一周",icon:"🔥",unlockedAt:"2024-06-08T09:15:00Z"}]),I=l(()=>"all"===b.value?P.value:P.value.filter(e=>e.category===b.value)),Z=l(()=>{const e=A.value.points;for(let a=q.length-1;a>=0;a--)if(e>=q[a].requiredPoints)return q[a];return q[0]}),M=l(()=>{const e=q.findIndex(e=>e.name===Z.value.name);return e<q.length-1?q[e+1]:q[q.length-1]}),S=l(()=>{const e=A.value.points,a=Z.value.requiredPoints,l=M.value.requiredPoints;return a===l?100:(e-a)/(l-a)*100}),$=e=>({common:"普通",rare:"稀有",epic:"史诗",legendary:"传说"}[e]||"普通"),j=e=>{if(!e)return"";const a=new Date(e),l=(new Date).getTime()-a.getTime(),t=Math.floor(l/864e5);return 0===t?"今天解锁":1===t?"昨天解锁":t<7?`${t}天前解锁`:a.toLocaleDateString("zh-CN")},z=e=>{if(!e)return"";const a=new Date(e),l=(new Date).getTime()-a.getTime(),t=Math.floor(l/36e5),s=Math.floor(t/24);return t<1?"刚刚":t<24?`${t}小时前`:`${s}天前`},F=e=>{x.value=e,C.value=!0},L=()=>{C.value=!1,x.value=null},N=()=>{const e=x.value;e&&uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"",title:`我获得了成就：${e.name}`,summary:e.description,imageUrl:"",success:()=>{uni.showToast({title:"分享成功",icon:"success"}),L()},fail:()=>{uni.showToast({title:"分享失败",icon:"none"})}})},U=()=>{uni.showModal({title:"最近解锁",content:"查看所有最近解锁的成就",showCancel:!1})};return t(()=>{console.log("加载成就系统数据")}),(e,a)=>{const l=y,t=g,q=h,P=w;return s(),i(t,{class:"container"},{default:n(()=>[r(" 页面头部 "),o(t,{class:"page-header"},{default:n(()=>[o(l,{class:"page-title"},{default:n(()=>[c("成就系统")]),_:1}),o(l,{class:"page-subtitle"},{default:n(()=>[c("记录你的每一份成长")]),_:1})]),_:1}),r(" 成就概览 "),o(t,{class:"achievement-overview"},{default:n(()=>[o(t,{class:"overview-card"},{default:n(()=>[o(t,{class:"overview-item"},{default:n(()=>[o(l,{class:"overview-number"},{default:n(()=>[c(u(A.value.total),1)]),_:1}),o(l,{class:"overview-label"},{default:n(()=>[c("总成就")]),_:1})]),_:1}),o(t,{class:"overview-item"},{default:n(()=>[o(l,{class:"overview-number"},{default:n(()=>[c(u(A.value.unlocked),1)]),_:1}),o(l,{class:"overview-label"},{default:n(()=>[c("已解锁")]),_:1})]),_:1}),o(t,{class:"overview-item"},{default:n(()=>[o(l,{class:"overview-number"},{default:n(()=>[c(u(A.value.points),1)]),_:1}),o(l,{class:"overview-label"},{default:n(()=>[c("成就点数")]),_:1})]),_:1}),o(t,{class:"overview-item"},{default:n(()=>[o(l,{class:"overview-number"},{default:n(()=>[c(u(A.value.rank),1)]),_:1}),o(l,{class:"overview-label"},{default:n(()=>[c("当前等级")]),_:1})]),_:1})]),_:1}),r(" 等级进度条 "),o(t,{class:"level-progress"},{default:n(()=>[o(t,{class:"progress-header"},{default:n(()=>[o(l,{class:"current-level"},{default:n(()=>[c(u(d(Z).name),1)]),_:1}),o(l,{class:"next-level"},{default:n(()=>[c(u(d(M).name),1)]),_:1})]),_:1}),o(t,{class:"progress-bar"},{default:n(()=>[o(t,{class:"progress-fill",style:v({width:d(S)+"%"})},null,8,["style"])]),_:1}),o(l,{class:"progress-text"},{default:n(()=>[c(u(A.value.points)+"/"+u(d(M).requiredPoints)+" 点",1)]),_:1})]),_:1})]),_:1}),r(" 分类筛选 "),o(t,{class:"category-filter"},{default:n(()=>[o(q,{class:"filter-scroll","scroll-x":"true"},{default:n(()=>[(s(),f(_,null,m(T,e=>o(t,{class:k(["filter-item",{active:b.value===e.key}]),key:e.key,onClick:a=>(e=>{b.value=e})(e.key)},{default:n(()=>[o(l,{class:"filter-icon"},{default:n(()=>[c(u(e.icon),1)]),_:2},1024),o(l,{class:"filter-name"},{default:n(()=>[c(u(e.name),1)]),_:2},1024)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),r(" 成就列表 "),o(t,{class:"achievements-list"},{default:n(()=>[(s(!0),f(_,null,m(d(I),e=>(s(),i(t,{class:k(["achievement-item",{unlocked:e.unlocked,locked:!e.unlocked,rare:"rare"===e.rarity,epic:"epic"===e.rarity,legendary:"legendary"===e.rarity}]),key:e.id,onClick:a=>F(e)},{default:n(()=>[o(t,{class:"achievement-icon-container"},{default:n(()=>[o(l,{class:"achievement-icon"},{default:n(()=>[c(u(e.icon),1)]),_:2},1024),e.unlocked&&"common"!==e.rarity?(s(),i(t,{key:0,class:"rarity-glow"})):r("v-if",!0),e.unlocked?(s(),i(t,{key:1,class:"unlock-badge"},{default:n(()=>[c("✓")]),_:1})):r("v-if",!0)]),_:2},1024),o(t,{class:"achievement-info"},{default:n(()=>[o(l,{class:"achievement-name"},{default:n(()=>[c(u(e.name),1)]),_:2},1024),o(l,{class:"achievement-desc"},{default:n(()=>[c(u(e.description),1)]),_:2},1024),r(" 进度条 "),e.unlocked||void 0===e.progress?r("v-if",!0):(s(),i(t,{key:0,class:"achievement-progress"},{default:n(()=>[o(t,{class:"progress-bar mini"},{default:n(()=>[o(t,{class:"progress-fill",style:v({width:e.progress/e.target*100+"%"})},null,8,["style"])]),_:2},1024),o(l,{class:"progress-text mini"},{default:n(()=>[c(u(e.progress)+"/"+u(e.target),1)]),_:2},1024)]),_:2},1024)),r(" 解锁时间 "),e.unlocked?(s(),i(l,{key:1,class:"unlock-time"},{default:n(()=>[c(u(j(e.unlockedAt)),1)]),_:2},1024)):r("v-if",!0)]),_:2},1024),o(t,{class:"achievement-reward"},{default:n(()=>[o(l,{class:"reward-points"},{default:n(()=>[c("+"+u(e.points),1)]),_:2},1024),o(t,{class:k(["rarity-badge",e.rarity])},{default:n(()=>[c(u($(e.rarity)),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),r(" 最近解锁 "),D.value.length>0?(s(),i(t,{key:0,class:"recent-unlocks"},{default:n(()=>[o(t,{class:"section-header"},{default:n(()=>[o(l,{class:"section-title"},{default:n(()=>[c("最近解锁")]),_:1}),o(l,{class:"view-all",onClick:U},{default:n(()=>[c("查看全部")]),_:1})]),_:1}),o(q,{class:"recent-scroll","scroll-x":"true"},{default:n(()=>[(s(!0),f(_,null,m(D.value,e=>(s(),i(t,{class:"recent-item",key:e.id,onClick:a=>F(e)},{default:n(()=>[o(l,{class:"recent-icon"},{default:n(()=>[c(u(e.icon),1)]),_:2},1024),o(l,{class:"recent-name"},{default:n(()=>[c(u(e.name),1)]),_:2},1024),o(l,{class:"recent-time"},{default:n(()=>[c(u(z(e.unlockedAt)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):r("v-if",!0),r(" 成就详情模态框 "),C.value?(s(),i(t,{key:1,class:"achievement-modal",onClick:L},{default:n(()=>[o(t,{class:"modal-content",onClick:a[0]||(a[0]=p(()=>{},["stop"]))},{default:n(()=>[o(t,{class:"modal-header"},{default:n(()=>{var e,a;return[o(t,{class:k(["modal-icon-container",null==(e=x.value)?void 0:e.rarity])},{default:n(()=>[o(l,{class:"modal-icon"},{default:n(()=>{var e;return[c(u(null==(e=x.value)?void 0:e.icon),1)]}),_:1}),o(t,{class:"modal-glow"})]),_:1},8,["class"]),o(l,{class:"modal-title"},{default:n(()=>{var e;return[c(u(null==(e=x.value)?void 0:e.name),1)]}),_:1}),o(t,{class:k(["modal-rarity",null==(a=x.value)?void 0:a.rarity])},{default:n(()=>{var e;return[c(u($(null==(e=x.value)?void 0:e.rarity)),1)]}),_:1},8,["class"])]}),_:1}),o(t,{class:"modal-body"},{default:n(()=>{var e;return[o(l,{class:"modal-description"},{default:n(()=>{var e;return[c(u(null==(e=x.value)?void 0:e.description),1)]}),_:1}),o(t,{class:"modal-details"},{default:n(()=>{var e,a;return[o(t,{class:"detail-item"},{default:n(()=>[o(l,{class:"detail-label"},{default:n(()=>[c("奖励点数")]),_:1}),o(l,{class:"detail-value"},{default:n(()=>{var e;return[c(u(null==(e=x.value)?void 0:e.points)+" 点",1)]}),_:1})]),_:1}),(null==(e=x.value)?void 0:e.unlocked)?(s(),i(t,{key:0,class:"detail-item"},{default:n(()=>[o(l,{class:"detail-label"},{default:n(()=>[c("解锁时间")]),_:1}),o(l,{class:"detail-value"},{default:n(()=>{var e;return[c(u(j(null==(e=x.value)?void 0:e.unlockedAt)),1)]}),_:1})]),_:1})):r("v-if",!0),(null==(a=x.value)?void 0:a.unlocked)?r("v-if",!0):(s(),i(t,{key:1,class:"detail-item"},{default:n(()=>[o(l,{class:"detail-label"},{default:n(()=>[c("完成进度")]),_:1}),o(l,{class:"detail-value"},{default:n(()=>{var e,a;return[c(u((null==(e=x.value)?void 0:e.progress)||0)+"/"+u(null==(a=x.value)?void 0:a.target),1)]}),_:1})]),_:1})),o(t,{class:"detail-item"},{default:n(()=>[o(l,{class:"detail-label"},{default:n(()=>[c("稀有度")]),_:1}),o(l,{class:"detail-value"},{default:n(()=>{var e;return[c(u($(null==(e=x.value)?void 0:e.rarity)),1)]}),_:1})]),_:1})]}),_:1}),(null==(e=x.value)?void 0:e.unlocked)?r("v-if",!0):(s(),i(t,{key:0,class:"modal-tips"},{default:n(()=>[o(l,{class:"tips-title"},{default:n(()=>[c("解锁提示")]),_:1}),o(l,{class:"tips-content"},{default:n(()=>{var e;return[c(u(null==(e=x.value)?void 0:e.hint),1)]}),_:1})]),_:1}))]}),_:1}),o(t,{class:"modal-footer"},{default:n(()=>{var e;return[o(P,{class:"modal-close",onClick:L},{default:n(()=>[c("关闭")]),_:1}),(null==(e=x.value)?void 0:e.unlocked)?(s(),i(P,{key:0,class:"modal-share",onClick:N},{default:n(()=>[c(" 分享成就 ")]),_:1})):r("v-if",!0)]}),_:1})]),_:1})]),_:1})):r("v-if",!0)]),_:1})}}}),[["__scopeId","data-v-97037aa7"]]);export{C as default};
