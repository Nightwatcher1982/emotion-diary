"use strict";const t=require("../common/vendor.js");if(!Array){(t.resolveComponent("stop")+t.resolveComponent("linearGradient")+t.resolveComponent("defs")+t.resolveComponent("polyline")+t.resolveComponent("polygon")+t.resolveComponent("circle")+t.resolveComponent("svg")+t.resolveComponent("path")+t.resolveComponent("g"))()}const e=t.defineComponent({__name:"SimpleChart",props:{chartType:null,data:null,title:null,width:{default:"100%"},height:{default:"300rpx"}},emits:["chartClick"],setup(e,{emit:a}){const n=e,o=["6-8","8-10","10-12","12-14","14-16","16-18","18-20","20-22","22-24"],r=["周一","周二","周三","周四","周五","周六","周日"],l=()=>{if(!n.data.length)return"";const t=300/(n.data.length-1);return n.data.map((e,a)=>`${a*t},${200-200*(e.value||e.mood)/10}`).join(" ")},p=()=>{const t=l();return t?`0,200 ${t} 300,200`:""},c=()=>{if(!n.data.length)return[];const t=300/(n.data.length-1);return n.data.map((e,a)=>({x:a*t,y:200-200*(e.value||e.mood)/10}))},i=t=>{if(!n.data.length)return"0%";const e=n.data.map(t=>t.value||t.count||0).filter(t=>t>0);if(0===e.length)return"0%";const a=Math.max(...e),o=t.value||t.count||0;if(0===a)return"0%";const r=o/a*80;return`${Math.max(r,2)}%`},d=()=>{if(!n.data.length)return[];const t=n.data.reduce((t,e)=>t+(e.percentage||e.value||0),0);if(0===t)return[];let e=-Math.PI/2;return n.data.map((a,n)=>{const o=(a.percentage||a.value||0)/t,r=2*o*Math.PI;if(0===r)return{path:"",color:a.color};const l=100,p=100,c=70,i=l+c*Math.cos(e),d=p+c*Math.sin(e),h=l+c*Math.cos(e+r),s=p+c*Math.sin(e+r),f=r>Math.PI?1:0;let u;return u=o>=.999?"M 100 30 A 70 70 0 1 1 99 30 Z":["M 100 100",`L ${i} ${d}`,`A 70 70 0 ${f} 1 ${h} ${s}`,"Z"].join(" "),e+=r,{path:u,color:a.color||"#4A90E2",percentage:Math.round(100*o)}}).filter(t=>""!==t.path)},h=()=>{const t=[];for(let e=0;e<7;e++){const a=[];for(let t=0;t<9;t++){const o=n.data.find(a=>a.day===e&&a.hour===t);a.push({value:o?o.intensity:Math.random()})}t.push(a)}return t};return(s,f)=>t.e({a:"line"===e.chartType},"line"===e.chartType?{b:t.t(e.title||"情绪趋势"),c:t.f(11,(e,a,n)=>({a:t.t(10-(e-1)),b:e})),d:t.p({offset:"0%"}),e:t.p({offset:"100%"}),f:t.p({id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),g:t.p({points:l(),fill:"none",stroke:"#4A90E2","stroke-width":"2"}),h:t.p({points:p(),fill:"url(#gradient)"}),i:t.f(c(),(e,o,r)=>({a:o,b:t.o(t=>(t=>{a("chartClick",{type:"point",index:t,data:n.data[t]})})(o),o),c:"937f4333-7-"+r+",937f4333-0",d:t.p({cx:e.x,cy:e.y,r:"3",fill:"#4A90E2"})})),j:t.p({viewBox:"0 0 300 200"}),k:t.f(e.data,(e,a,n)=>({a:t.t(e.name||e.label),b:a}))}:"bar"===e.chartType?{m:t.t(e.title||"数据统计"),n:t.f(e.data,(e,o,r)=>({a:t.t(e.value||e.count),b:i(e),c:e.color||"#4A90E2",d:t.t(e.name||e.label),e:o,f:t.o(t=>(t=>{a("chartClick",{type:"bar",index:t,data:n.data[t]})})(o),o)}))}:"pie"===e.chartType?{p:t.t(e.title||"分布统计"),q:t.f(d(),(e,o,r)=>({a:t.o(t=>(t=>{a("chartClick",{type:"pie",index:t,data:n.data[t]})})(o),o),b:"937f4333-10-"+r+",937f4333-9-"+r,c:t.p({d:e.path,fill:e.color}),d:o,e:"937f4333-9-"+r+",937f4333-8"})),r:t.p({viewBox:"0 0 200 200"}),s:t.f(e.data,(e,a,n)=>({a:e.color,b:t.t(e.name),c:t.t(e.percentage||e.value),d:a}))}:"heatmap"===e.chartType?{v:t.t(e.title||"活跃度热力图"),w:t.f(h(),(e,n,l)=>({a:t.f(e,(e,l,p)=>{return{a:t.t(e.value.toFixed(1)),b:l,c:(c=e.value,`rgba(74, 144, 226, ${Math.max(.1,Math.min(1,c))})`),d:t.o(t=>((t,e)=>{a("chartClick",{type:"heatmap",row:t,col:e,day:r[t],hour:o[e]})})(n,l),l)};var c}),b:n})),x:t.f(o,(e,a,n)=>({a:t.t(e),b:e})),y:t.f(r,(e,a,n)=>({a:t.t(e),b:e}))}:{},{l:"bar"===e.chartType,o:"pie"===e.chartType,t:"heatmap"===e.chartType})}}),a=t._export_sfc(e,[["__scopeId","data-v-937f4333"]]);wx.createComponent(a);
