"use strict";const e=require("../../common/vendor.js"),n=e.defineComponent({__name:"index",setup(n){const o=e.ref("all"),t=e.ref(!1),i=e.ref(null),r=e.ref({total:48,unlocked:12,points:850,rank:"情绪探索者"}),a=[{key:"all",name:"全部",icon:"🏆"},{key:"record",name:"记录",icon:"📝"},{key:"analysis",name:"分析",icon:"📊"},{key:"streak",name:"坚持",icon:"🔥"},{key:"social",name:"社交",icon:"👥"},{key:"milestone",name:"里程碑",icon:"🎯"},{key:"special",name:"特殊",icon:"⭐"}],l=[{name:"情绪新手",requiredPoints:0},{name:"情绪学徒",requiredPoints:100},{name:"情绪探索者",requiredPoints:500},{name:"情绪分析师",requiredPoints:1e3},{name:"情绪大师",requiredPoints:2e3},{name:"情绪导师",requiredPoints:5e3}],u=e.ref([{id:1,name:"初次记录",description:"完成第一次情绪记录",icon:"🌱",points:10,rarity:"common",category:"record",unlocked:!0,unlockedAt:"2024-06-01T10:30:00Z",hint:"开始你的情绪记录之旅"},{id:2,name:"坚持一周",description:"连续7天记录情绪",icon:"🔥",points:50,rarity:"rare",category:"streak",unlocked:!0,unlockedAt:"2024-06-08T09:15:00Z",hint:"保持记录的习惯"},{id:3,name:"AI分析师",description:"使用AI分析功能10次",icon:"🤖",points:30,rarity:"common",category:"analysis",unlocked:!1,progress:6,target:10,hint:"多使用AI分析功能了解自己"},{id:4,name:"情绪光谱",description:"记录所有7种基础情绪",icon:"🌈",points:80,rarity:"epic",category:"milestone",unlocked:!1,progress:5,target:7,hint:"体验更多元的情绪"},{id:5,name:"深度思考者",description:"完成50次深度分析",icon:"🧠",points:100,rarity:"epic",category:"analysis",unlocked:!1,progress:23,target:50,hint:"深入探索内心世界"},{id:6,name:"月度坚持者",description:"连续30天记录情绪",icon:"📅",points:200,rarity:"legendary",category:"streak",unlocked:!1,progress:18,target:30,hint:"养成长期记录的好习惯"},{id:7,name:"社交达人",description:"分享成就5次",icon:"📢",points:40,rarity:"rare",category:"social",unlocked:!0,unlockedAt:"2024-06-15T14:20:00Z",hint:"与朋友分享你的成长"},{id:8,name:"午夜记录者",description:"在午夜12点记录情绪",icon:"🌙",points:25,rarity:"rare",category:"special",unlocked:!1,hint:"在特殊时刻记录特殊心情"}]),c=e.ref([{id:7,name:"社交达人",icon:"📢",unlockedAt:"2024-06-15T14:20:00Z"},{id:2,name:"坚持一周",icon:"🔥",unlockedAt:"2024-06-08T09:15:00Z"}]),d=e.computed(()=>"all"===o.value?u.value:u.value.filter(e=>e.category===o.value)),s=e.computed(()=>{const e=r.value.points;for(let n=l.length-1;n>=0;n--)if(e>=l[n].requiredPoints)return l[n];return l[0]}),v=e.computed(()=>{const e=l.findIndex(e=>e.name===s.value.name);return e<l.length-1?l[e+1]:l[l.length-1]}),m=e.computed(()=>{const e=r.value.points,n=s.value.requiredPoints,o=v.value.requiredPoints;return n===o?100:(e-n)/(o-n)*100}),k=e=>({common:"普通",rare:"稀有",epic:"史诗",legendary:"传说"}[e]||"普通"),p=e=>{if(!e)return"";const n=new Date(e),o=(new Date).getTime()-n.getTime(),t=Math.floor(o/864e5);return 0===t?"今天解锁":1===t?"昨天解锁":t<7?`${t}天前解锁`:n.toLocaleDateString("zh-CN")},y=e=>{if(!e)return"";const n=new Date(e),o=(new Date).getTime()-n.getTime(),t=Math.floor(o/36e5),i=Math.floor(t/24);return t<1?"刚刚":t<24?`${t}小时前`:`${i}天前`},g=e=>{i.value=e,t.value=!0},f=()=>{t.value=!1,i.value=null},h=()=>{const n=i.value;n&&e.index.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"",title:`我获得了成就：${n.name}`,summary:n.description,imageUrl:"",success:()=>{e.index.showToast({title:"分享成功",icon:"success"}),f()},fail:()=>{e.index.showToast({title:"分享失败",icon:"none"})}})},q=()=>{e.index.showModal({title:"最近解锁",content:"查看所有最近解锁的成就",showCancel:!1})};return e.onMounted(()=>{console.log("加载成就系统数据")}),(n,l)=>{var u,A,w,P,T,x,D,I,_,M,Z,b,C,$,j,S,z,B,E,F;return e.e({a:e.t(r.value.total),b:e.t(r.value.unlocked),c:e.t(r.value.points),d:e.t(r.value.rank),e:e.t(e.unref(s).name),f:e.t(e.unref(v).name),g:e.unref(m)+"%",h:e.t(r.value.points),i:e.t(e.unref(v).requiredPoints),j:e.f(a,(n,t,i)=>({a:e.t(n.icon),b:e.t(n.name),c:n.key,d:o.value===n.key?1:"",e:e.o(e=>(e=>{o.value=e})(n.key),n.key)})),k:e.f(e.unref(d),(n,o,t)=>e.e({a:e.t(n.icon),b:n.unlocked&&"common"!==n.rarity},(n.unlocked&&n.rarity,{}),{c:n.unlocked},(n.unlocked,{}),{d:e.t(n.name),e:e.t(n.description),f:!n.unlocked&&void 0!==n.progress},n.unlocked||void 0===n.progress?{}:{g:n.progress/n.target*100+"%",h:e.t(n.progress),i:e.t(n.target)},{j:n.unlocked},n.unlocked?{k:e.t(p(n.unlockedAt))}:{},{l:e.t(n.points),m:e.t(k(n.rarity)),n:e.n(n.rarity),o:n.id,p:n.unlocked?1:"",q:n.unlocked?"":1,r:"rare"===n.rarity?1:"",s:"epic"===n.rarity?1:"",t:"legendary"===n.rarity?1:"",v:e.o(e=>g(n),n.id)})),l:c.value.length>0},c.value.length>0?{m:e.o(q),n:e.f(c.value,(n,o,t)=>({a:e.t(n.icon),b:e.t(n.name),c:e.t(y(n.unlockedAt)),d:n.id,e:e.o(e=>g(n),n.id)}))}:{},{o:t.value},t.value?e.e({p:e.t(null==(u=i.value)?void 0:u.icon),q:e.n(null==(A=i.value)?void 0:A.rarity),r:e.t(null==(w=i.value)?void 0:w.name),s:e.t(k(null==(P=i.value)?void 0:P.rarity)),t:e.n(null==(T=i.value)?void 0:T.rarity),v:e.t(null==(x=i.value)?void 0:x.description),w:e.t(null==(D=i.value)?void 0:D.points),x:null==(I=i.value)?void 0:I.unlocked},(null==(_=i.value)?void 0:_.unlocked)?{y:e.t(p(null==(M=i.value)?void 0:M.unlockedAt))}:{},{z:!(null==(Z=i.value)?void 0:Z.unlocked)},(null==(b=i.value)?void 0:b.unlocked)?{}:{A:e.t((null==(C=i.value)?void 0:C.progress)||0),B:e.t(null==($=i.value)?void 0:$.target)},{C:e.t(k(null==(j=i.value)?void 0:j.rarity)),D:!(null==(S=i.value)?void 0:S.unlocked)},(null==(z=i.value)?void 0:z.unlocked)?{}:{E:e.t(null==(B=i.value)?void 0:B.hint)},{F:e.o(f),G:null==(E=i.value)?void 0:E.unlocked},(null==(F=i.value)?void 0:F.unlocked)?{H:e.o(h)}:{},{I:e.o(()=>{}),J:e.o(f)}):{})}}}),o=e._export_sfc(n,[["__scopeId","data-v-97037aa7"]]);wx.createPage(o);
