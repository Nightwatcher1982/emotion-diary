<view class="container data-v-de8e6dd4"><view class="page-header data-v-de8e6dd4"><text class="page-title data-v-de8e6dd4">情绪记录</text><button class="draft-button data-v-de8e6dd4" bindtap="{{a}}"><text class="draft-icon data-v-de8e6dd4">💾</text><text class="draft-text data-v-de8e6dd4">保存草稿</text></button></view><view class="progress-bar data-v-de8e6dd4"><view class="{{['progress-step', 'data-v-de8e6dd4', b && 'active']}}"><text class="step-number data-v-de8e6dd4">1</text><text class="step-text data-v-de8e6dd4">描述</text></view><view class="{{['progress-line', 'data-v-de8e6dd4', c && 'active']}}"></view><view class="{{['progress-step', 'data-v-de8e6dd4', d && 'active']}}"><text class="step-number data-v-de8e6dd4">2</text><text class="step-text data-v-de8e6dd4">情绪</text></view><view class="{{['progress-line', 'data-v-de8e6dd4', e && 'active']}}"></view><view class="{{['progress-step', 'data-v-de8e6dd4', f && 'active']}}"><text class="step-number data-v-de8e6dd4">3</text><text class="step-text data-v-de8e6dd4">场景</text></view><view class="{{['progress-line', 'data-v-de8e6dd4', g && 'active']}}"></view><view class="{{['progress-step', 'data-v-de8e6dd4', h && 'active']}}"><text class="step-number data-v-de8e6dd4">4</text><text class="step-text data-v-de8e6dd4">详情</text></view></view><view wx:if="{{i}}" class="step-content data-v-de8e6dd4"><view class="step-title data-v-de8e6dd4"><text class="title data-v-de8e6dd4">今天发生了什么？</text><text class="subtitle data-v-de8e6dd4">用文字记录下你的感受</text></view><view class="input-section data-v-de8e6dd4"><block wx:if="{{r0}}"><textarea class="diary-input data-v-de8e6dd4" placeholder="今天发生了什么？一句话描述也可以..." maxlength="200" auto-height bindinput="{{j}}" value="{{k}}"/></block><view class="char-count data-v-de8e6dd4"><text class="count data-v-de8e6dd4">{{l}}</text><text class="max data-v-de8e6dd4">/200</text></view></view><view class="voice-input data-v-de8e6dd4" bindtap="{{m}}"><text class="voice-icon data-v-de8e6dd4">🎤</text><text class="voice-text data-v-de8e6dd4">语音输入</text></view><view class="step-actions data-v-de8e6dd4"><button class="next-button data-v-de8e6dd4" bindtap="{{n}}" disabled="{{o}}"> 下一步 </button></view></view><view wx:if="{{p}}" class="step-content data-v-de8e6dd4"><view class="step-title data-v-de8e6dd4"><text class="title data-v-de8e6dd4">选择你的情绪</text><text class="subtitle data-v-de8e6dd4">可以选择多个情绪</text></view><view class="emotions-grid data-v-de8e6dd4"><view wx:for="{{q}}" wx:for-item="emotion" wx:key="d" class="{{['emotion-item', 'data-v-de8e6dd4', emotion.e && 'selected']}}" bindtap="{{emotion.f}}"><text class="emotion-icon data-v-de8e6dd4">{{emotion.a}}</text><text class="emotion-name data-v-de8e6dd4">{{emotion.b}}</text><view class="emotion-desc data-v-de8e6dd4">{{emotion.c}}</view></view></view><view wx:if="{{r}}" class="intensity-section data-v-de8e6dd4"><view class="intensity-title data-v-de8e6dd4"><text class="data-v-de8e6dd4">情绪强度</text><text class="intensity-value data-v-de8e6dd4">{{s}}/10</text></view><slider class="intensity-slider data-v-de8e6dd4" value="{{t}}" bindchange="{{v}}" min="1" max="10" step="1" activeColor="#4A90E2" backgroundColor="#e0e0e0" block-size="20"/><view class="intensity-labels data-v-de8e6dd4"><text class="label-left data-v-de8e6dd4">轻微</text><text class="label-right data-v-de8e6dd4">强烈</text></view></view><view class="step-actions data-v-de8e6dd4"><button class="prev-button data-v-de8e6dd4" bindtap="{{w}}">上一步</button><button class="next-button data-v-de8e6dd4" bindtap="{{x}}" disabled="{{y}}"> 下一步 </button></view></view><view wx:if="{{z}}" class="step-content data-v-de8e6dd4"><view class="step-title data-v-de8e6dd4"><text class="title data-v-de8e6dd4">选择相关场景</text><text class="subtitle data-v-de8e6dd4">这有助于AI更好地分析</text></view><view class="scenes-list data-v-de8e6dd4"><view wx:for="{{A}}" wx:for-item="scene" wx:key="e" class="{{['scene-item', 'data-v-de8e6dd4', scene.f && 'selected']}}" bindtap="{{scene.g}}"><text class="scene-icon data-v-de8e6dd4">{{scene.a}}</text><view class="scene-info data-v-de8e6dd4"><text class="scene-name data-v-de8e6dd4">{{scene.b}}</text><text class="scene-desc data-v-de8e6dd4">{{scene.c}}</text></view><text wx:if="{{scene.d}}" class="check-icon data-v-de8e6dd4">✓</text></view></view><view class="deep-analysis-section data-v-de8e6dd4"><view class="analysis-header data-v-de8e6dd4" bindtap="{{D}}"><view class="analysis-info data-v-de8e6dd4"><text class="analysis-title data-v-de8e6dd4">深度分析</text><text class="analysis-desc data-v-de8e6dd4">回答几个问题，获得更精准的AI建议</text></view><switch class="data-v-de8e6dd4" checked="{{B}}" bindchange="{{C}}" color="#4A90E2"/></view></view><view class="step-actions data-v-de8e6dd4"><button class="prev-button data-v-de8e6dd4" bindtap="{{E}}">上一步</button><button class="next-button data-v-de8e6dd4" bindtap="{{F}}" disabled="{{G}}"> 下一步 </button></view></view><view wx:if="{{H}}" class="step-content data-v-de8e6dd4"><view class="step-title data-v-de8e6dd4"><text class="title data-v-de8e6dd4">详细信息</text><text class="subtitle data-v-de8e6dd4">选择触发因素和身体症状（可选）</text></view><view class="detail-section data-v-de8e6dd4"><view class="section-title data-v-de8e6dd4"><text class="data-v-de8e6dd4">触发因素</text></view><view class="triggers-grid data-v-de8e6dd4"><view wx:for="{{I}}" wx:for-item="trigger" wx:key="b" class="{{['trigger-item', 'data-v-de8e6dd4', trigger.c && 'selected']}}" bindtap="{{trigger.d}}"><text class="trigger-text data-v-de8e6dd4">{{trigger.a}}</text></view></view></view><view class="detail-section data-v-de8e6dd4"><view class="section-title data-v-de8e6dd4"><text class="data-v-de8e6dd4">身体症状</text></view><view class="symptoms-grid data-v-de8e6dd4"><view wx:for="{{J}}" wx:for-item="symptom" wx:key="b" class="{{['symptom-item', 'data-v-de8e6dd4', symptom.c && 'selected']}}" bindtap="{{symptom.d}}"><text class="symptom-text data-v-de8e6dd4">{{symptom.a}}</text></view></view></view><view class="detail-section data-v-de8e6dd4"><view class="section-title data-v-de8e6dd4"><text class="data-v-de8e6dd4">应对方式</text></view><view class="coping-grid data-v-de8e6dd4"><view wx:for="{{K}}" wx:for-item="method" wx:key="b" class="{{['coping-item', 'data-v-de8e6dd4', method.c && 'selected']}}" bindtap="{{method.d}}"><text class="coping-text data-v-de8e6dd4">{{method.a}}</text></view></view></view><view class="deep-analysis-section data-v-de8e6dd4"><view class="analysis-header data-v-de8e6dd4" bindtap="{{N}}"><view class="analysis-info data-v-de8e6dd4"><text class="analysis-title data-v-de8e6dd4">深度分析</text><text class="analysis-desc data-v-de8e6dd4">回答几个问题，获得更精准的AI建议</text></view><switch class="data-v-de8e6dd4" checked="{{L}}" bindchange="{{M}}" color="#4A90E2"/></view></view><view class="record-preview data-v-de8e6dd4"><view class="preview-title data-v-de8e6dd4"><text class="data-v-de8e6dd4">记录预览</text></view><view class="preview-content data-v-de8e6dd4"><view class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">情绪描述：</text><text class="preview-text data-v-de8e6dd4">{{O}}</text></view><view class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">主要情绪：</text><text class="preview-text data-v-de8e6dd4">{{P}}</text></view><view class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">情绪强度：</text><text class="preview-text data-v-de8e6dd4">{{Q}}/10</text></view><view class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">相关场景：</text><text class="preview-text data-v-de8e6dd4">{{R}}</text></view><view wx:if="{{S}}" class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">触发因素：</text><text class="preview-text data-v-de8e6dd4">{{T}}</text></view><view wx:if="{{U}}" class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">身体症状：</text><text class="preview-text data-v-de8e6dd4">{{V}}</text></view><view wx:if="{{W}}" class="preview-item data-v-de8e6dd4"><text class="preview-label data-v-de8e6dd4">应对方式：</text><text class="preview-text data-v-de8e6dd4">{{X}}</text></view></view></view><view class="step-actions data-v-de8e6dd4"><button class="prev-button data-v-de8e6dd4" bindtap="{{Y}}">上一步</button><button class="save-button data-v-de8e6dd4" bindtap="{{aa}}">{{Z}}</button></view></view><view wx:if="{{ab}}" class="deep-analysis-modal data-v-de8e6dd4"><view class="modal-content data-v-de8e6dd4"><view class="modal-header data-v-de8e6dd4"><text class="modal-title data-v-de8e6dd4">深度分析 ({{ac}}/{{ad}})</text><text class="close-btn data-v-de8e6dd4" bindtap="{{ae}}">×</text></view><view class="question-content data-v-de8e6dd4"><text class="question-text data-v-de8e6dd4">{{af}}</text><view class="answer-options data-v-de8e6dd4"><view wx:for="{{ag}}" wx:for-item="option" wx:key="b" class="{{['option-item', 'data-v-de8e6dd4', option.c && 'selected']}}" bindtap="{{option.d}}"><text class="option-text data-v-de8e6dd4">{{option.a}}</text></view></view></view><view class="question-actions data-v-de8e6dd4"><button wx:if="{{ah}}" class="prev-question-btn data-v-de8e6dd4" bindtap="{{ai}}"> 上一题 </button><button class="next-question-btn data-v-de8e6dd4" bindtap="{{ak}}" disabled="{{al}}">{{aj}}</button></view></view></view></view>