"use strict";const e=require("../../common/vendor.js"),t=e.defineComponent({__name:"feedback",setup(t){const n=e.ref("bug"),a=e.ref("medium"),i=e.ref(!1),o=e.reactive({description:"",steps:[""],attachments:[],email:"",phone:""}),s=[{key:"bug",name:"é—®é¢˜åé¦ˆ",description:"åº”ç”¨å‡ºç°é”™è¯¯æˆ–å¼‚å¸¸",icon:"ğŸ›"},{key:"feature",name:"åŠŸèƒ½å»ºè®®",description:"å¸Œæœ›æ·»åŠ æ–°åŠŸèƒ½",icon:"ğŸ’¡"},{key:"improvement",name:"æ”¹è¿›å»ºè®®",description:"ç°æœ‰åŠŸèƒ½çš„æ”¹è¿›æ„è§",icon:"âš¡"},{key:"ui",name:"ç•Œé¢é—®é¢˜",description:"ç•Œé¢æ˜¾ç¤ºæˆ–äº¤äº’é—®é¢˜",icon:"ğŸ¨"},{key:"performance",name:"æ€§èƒ½é—®é¢˜",description:"åº”ç”¨è¿è¡Œç¼“æ…¢æˆ–å¡é¡¿",icon:"ğŸš€"},{key:"other",name:"å…¶ä»–",description:"å…¶ä»–ç±»å‹çš„åé¦ˆ",icon:"ğŸ“"}],c=[{key:"low",name:"ä½",icon:"ğŸŸ¢"},{key:"medium",name:"ä¸­",icon:"ğŸŸ¡"},{key:"high",name:"é«˜",icon:"ğŸŸ "},{key:"urgent",name:"ç´§æ€¥",icon:"ğŸ”´"}],r=e.ref({appVersion:"v1.0.0",systemVersion:"iOS 17.5",deviceModel:"iPhone 15 Pro",userId:"user_123456"}),u=e.ref([{id:1,type:"bug",title:"ç™»å½•é¡µé¢æ— æ³•æ­£å¸¸æ˜¾ç¤º",status:"resolved",createdAt:"2024-06-20T10:30:00Z"},{id:2,type:"feature",title:"å¸Œæœ›æ·»åŠ å¤œé—´æ¨¡å¼",status:"processing",createdAt:"2024-06-18T14:20:00Z"},{id:3,type:"improvement",title:"æƒ…ç»ªè®°å½•é¡µé¢åŠ è½½ä¼˜åŒ–",status:"pending",createdAt:"2024-06-15T09:15:00Z"}]),d=e.computed(()=>({bug:["åº”ç”¨å´©æºƒ","åŠŸèƒ½æ— æ³•ä½¿ç”¨","æ•°æ®æ˜¾ç¤ºé”™è¯¯","é¡µé¢åŠ è½½å¤±è´¥"],feature:["å¸Œæœ›æ·»åŠ ...","å»ºè®®å¢åŠ ...","æœŸæœ›æ”¯æŒ..."],improvement:["å»ºè®®ä¼˜åŒ–...","å¸Œæœ›æ”¹è¿›...","å¯ä»¥æ›´å¥½..."],ui:["ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸","æŒ‰é’®æ— æ³•ç‚¹å‡»","æ–‡å­—æ˜¾ç¤ºä¸å…¨","é¢œè‰²æ­é…é—®é¢˜"],performance:["å¯åŠ¨é€Ÿåº¦æ…¢","é¡µé¢å¡é¡¿","å†…å­˜å ç”¨é«˜","ç”µæ± æ¶ˆè€—å¿«"]}[n.value]||[])),l=e.computed(()=>o.description.trim().length>=10),p=()=>{o.steps.push("")},m=()=>{e.index.chooseImage({count:3,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths.forEach(e=>{o.attachments.push({name:`image_${Date.now()}.jpg`,url:e,type:"image"})})}})},v=()=>{i.value=!i.value},y=e=>{const t=s.find(t=>t.key===e);return t?t.icon:"ğŸ“"},g=e=>({pending:"å¾…å¤„ç†",processing:"å¤„ç†ä¸­",resolved:"å·²è§£å†³",closed:"å·²å…³é—­"}[e]||"æœªçŸ¥"),f=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/864e5);return 0===a?"ä»Šå¤©":1===a?"æ˜¨å¤©":a<7?`${a}å¤©å‰`:t.toLocaleDateString("zh-CN")},h=()=>{e.index.navigateTo({url:"/pages/help/feedback-history"})},k=()=>{l.value?(e.index.showLoading({title:"æäº¤ä¸­..."}),setTimeout(()=>{e.index.hideLoading(),e.index.showModal({title:"æäº¤æˆåŠŸ",content:"æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†æ‚¨çš„é—®é¢˜ã€‚",showCancel:!1,success:()=>{o.description="",o.steps=[""],o.attachments=[],o.email="",o.phone="",n.value="bug",a.value="medium",setTimeout(()=>{e.index.navigateBack()},1e3)}})},2e3)):e.index.showToast({title:"è¯·å®Œå–„åé¦ˆå†…å®¹",icon:"none"})};return e.onMounted(()=>{e.index.getSystemInfo({success:e=>{r.value={appVersion:"v1.0.0",systemVersion:`${e.platform} ${e.system}`,deviceModel:e.model,userId:"user_123456"}}})}),(t,b)=>e.e({a:e.f(s,(t,a,i)=>e.e({a:e.t(t.icon),b:e.t(t.name),c:e.t(t.description),d:n.value===t.key},(n.value,t.key,{}),{e:t.key,f:n.value===t.key?1:"",g:e.o(e=>(e=>{n.value=e})(t.key),t.key)})),b:o.description,c:e.o(e=>o.description=e.detail.value),d:e.t(o.description.length),e:e.unref(d).length>0},e.unref(d).length>0?{f:e.f(e.unref(d),(t,n,a)=>({a:e.t(t),b:t,c:e.o(e=>(e=>{o.description=e})(t),t)}))}:{},{g:"bug"===n.value},"bug"===n.value?{h:e.f(o.steps,(t,n,a)=>({a:e.t(n+1),b:o.steps[n],c:e.o(e=>o.steps[n]=e.detail.value,n),d:e.o(e=>(e=>{o.steps.length>1&&o.steps.splice(e,1)})(n),n),e:n})),i:e.o(p)}:{},{j:e.f(c,(t,n,i)=>({a:e.t(t.icon),b:e.t(t.name),c:t.key,d:a.value===t.key?1:"",e:t.key,f:e.o(e=>(e=>{a.value=e})(t.key),t.key)})),k:e.f(o.attachments,(t,n,a)=>e.e({a:"image"===t.type},"image"===t.type?{b:t.url}:{c:e.t(t.name)},{d:e.o(e=>(e=>{o.attachments.splice(e,1)})(n),n),e:n})),l:e.o(m),m:o.email,n:e.o(e=>o.email=e.detail.value),o:o.phone,p:e.o(e=>o.phone=e.detail.value),q:i.value?1:"",r:e.o(v),s:i.value},i.value?{t:e.t(r.value.appVersion),v:e.t(r.value.systemVersion),w:e.t(r.value.deviceModel),x:e.t(r.value.userId)}:{},{y:e.o(h),z:e.f(u.value,(t,n,a)=>({a:e.t(y(t.type)),b:e.t(t.title),c:e.t(f(t.createdAt)),d:e.t(g(t.status)),e:e.n(t.status),f:t.id,g:e.o(n=>(t=>{e.index.showModal({title:t.title,content:`çŠ¶æ€ï¼š${g(t.status)}\næäº¤æ—¶é—´ï¼š${f(t.createdAt)}`,showCancel:!1})})(t),t.id)})),A:e.unref(l)?"":1,B:e.o(k),C:!e.unref(l)})}}),n=e._export_sfc(t,[["__scopeId","data-v-df4175ca"]]);wx.createPage(n);
